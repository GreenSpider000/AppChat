(function(t){function e(e){for(var a,c,o=e[0],r=e[1],l=e[2],d=0,m=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&m.push(i[c][0]),i[c]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,o=1;o<s.length;o++){var r=s[o];0!==i[r]&&(a=!1)}a&&(n.splice(e--,1),t=c(c.s=s[0]))}return t}var a={},i={app:0},n=[];function c(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.m=t,c.c=a,c.d=function(t,e,s){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(s,a,function(e){return t[e]}.bind(null,a));return s},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=r;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},4678:function(t,e,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=n(t);return s(e)}function n(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=n,t.exports=i,i.id="4678"},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("bd86"),i=(s("456d"),s("ac6a"),s("3b2b"),s("a481"),s("cadf"),s("551c"),s("f751"),s("097d"),s("2b0e")),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"c-animate",attrs:{id:"addchat-bubble"},on:{click:function(e){return t.openChat()}}},[s("div",{staticClass:"c-bubble-inner"},[t.countGuestNotification()>0||t.countNotification()>0?s("span",{staticClass:"c-bubble-notification",class:[null!=t.config.logged_user_id||t.guest_id>0?"c-active":""]},[s("i",{staticClass:"fas fa-bell"})]):t._e(),s("img",{staticClass:"c-bubble-image",attrs:{src:t.widgetIcon(t.config.chat_icon)}})])]),null!=t.config.logged_user_id?s("div",[t.admin||t.close?t._e():s("div",{staticClass:"c-animate",class:[t.user.size_small>0?"c-resize-s":"",t.user.dark_mode>0?"c-mode-dark":""],attrs:{id:"addchat-bot"}},[s("div",{staticClass:"c-sidebar"},[s("div",{staticClass:"c-top-menu"},[s("div",{staticClass:"c-top-left"},[t.user.size_small<=0?s("span",{staticClass:"c-size-s",on:{click:function(e){return t.sizeChange(1)}}}):t._e(),t.user.size_small>0?s("span",{staticClass:"c-size-l",on:{click:function(e){return t.sizeChange(0)}}}):t._e(),t.user.dark_mode>0?s("span",{staticClass:"c-light",on:{click:function(e){return t.darkModeChange(0)}}}):t._e(),t.user.dark_mode<=0?s("span",{staticClass:"c-dark",on:{click:function(e){return t.darkModeChange(1)}}}):t._e()]),s("div",{staticClass:"c-top-right"},[s("span",{staticClass:"c-closed",on:{click:function(e){t.close=t.add({close:!0})}}})])]),s("div",{staticClass:"c-menu"},[s("div",{staticClass:"c-menu-item c-chat",class:{"c-active":1==t.active},on:{click:function(e){return t.activated(1)}}},[t.countNotification()>0?s("span",{staticClass:"c-n-dot"},[t._v(t._s(t.countNotification()))]):t._e()]),t.config.is_groups>0?s("div",{staticClass:"c-menu-item c-chat-group",class:{"c-active":2==t.active},on:{click:function(e){return t.activated(2)}}}):t._e(),s("div",{staticClass:"c-menu-item c-setting",class:{"c-active":3==t.active},on:{click:function(e){return t.activated(3)}}}),null!=t.user.is_guest_group||t.config.logged_user_id===t.config.admin_user_id?s("div",{staticClass:"c-menu-item c-guest",class:{"c-active":4==t.active},on:{click:function(e){return t.activated(4)}}},[t.countGuestNotification()?s("span",{staticClass:"c-n-dot"},[t._v(t._s(t.countGuestNotification()))]):t._e()]):t._e()]),s("contacts-component"),s("guests-component"),t.config.is_groups>0?s("groups-component"):t._e(),s("profile-component")],1),s("div",{staticClass:"c-chatbox",class:{"c-active":t.buddy_id>0&&(1==t.active||2==t.active)}},[s("buddy-component"),s("span",{staticClass:"c-close c-animate",on:{click:function(e){return t.add({buddy_id:0})}}},[t._v("×")]),s("messages-component"),s("send-component")],1),s("div",{staticClass:"c-chatbox",class:{"c-active":t.guest_id>0&&4==t.active&&null!=t.user.is_guest_group}},[s("guests-buddy"),s("span",{staticClass:"c-close",on:{click:function(e){return t.add({guest_id:0})}}},[t._v("×")]),s("guests-messages"),s("guests-send")],1),s("div",{staticClass:"c-footer"},[s("p",{staticClass:"c-footer-text"},[t._v(t._s(t.config.footer_text))])]),s("div",{staticClass:"c-modal c-animate",class:[t.image_modal.status],attrs:{tabindex:"-1"}},[s("div",{staticClass:"c-modal-dialog c-modal-dialog-centered"},[s("div",{staticClass:"c-modal-content"},[s("div",{staticClass:"c-modal-body"},[s("img",{staticClass:"c-modal-image",attrs:{src:t.imageSource(t.image_modal.path)},on:{click:function(e){return t.add({image_modal:{status:"",path:null}})}}})])])])]),s("div",{staticClass:"c-toast c-animate ",class:[t.notify.status,"success"==t.notify.type?"c-toast-success":"c-toast-error"]},[s("span",{staticClass:"c-toast-icon"},["primary"==t.notify.type?s("i",{staticClass:"fas fa-info-circle"}):t._e(),"success"==t.notify.type?s("i",{staticClass:"fas fa-check-circle"}):t._e(),"error"==t.notify.type?s("i",{staticClass:"fas fa-times-circle"}):t._e()]),s("p",{staticClass:"c-toast-text",domProps:{innerHTML:t._s(t.notify.message)}})]),t.config.notification_type>0?s("pusher-component",{ref:"pusher_c"}):t._e(),t.config.notification_type>0?s("pusher-guests",{ref:"pusher_guest_c"}):t._e()],1),t.admin&&t.config.is_admin?s("div",{staticClass:"c-animate",class:{"c-mode-dark":t.user.dark_mode>0},attrs:{id:"addchat-bot-admin"}},[s("div",{staticClass:"c-toast c-animate ",class:[t.notify.status,"success"==t.notify.type?"c-toast-success":"c-toast-error"]},[s("span",{staticClass:"c-toast-icon"},["primary"==t.notify.type?s("i",{staticClass:"fas fa-info-circle"}):t._e(),"success"==t.notify.type?s("i",{staticClass:"fas fa-check-circle"}):t._e(),"error"==t.notify.type?s("i",{staticClass:"fas fa-times-circle"}):t._e()]),s("p",{staticClass:"c-toast-text",domProps:{innerHTML:t._s(t.notify.message)}})]),s("div",{staticClass:"ca-header"},[s("div",{staticClass:"ca-menu-toggle",on:{click:function(e){t.ca_sidebar=1}}},[s("i",{staticClass:"fas fa-bars"})]),s("h5",{staticClass:"ca-header-text c-animate",on:{click:function(e){t.admin=null}}},[t._v("Switch To Chat")])]),s("div",{staticClass:"ca-sidebar",class:{"ca-active":1==t.ca_sidebar}},[s("div",{staticClass:"ca-header-brand-wrap"},[s("img",{staticClass:"ca-header-avatar",attrs:{src:t.chatLogo(t.config.site_logo)}}),s("h5",{staticClass:"ca-header-brand"},[t._v(t._s(t.config.site_name)+" Admin")])]),s("div",{staticClass:"ca-sidebar-close",on:{click:function(e){t.ca_sidebar=0}}},[s("i",{staticClass:"fas fa-bars"})]),s("ul",{staticClass:"ca-sidebar-list"},[s("li",{staticClass:"ca-sidebar-list-item",class:{"ca-active":2===t.ca_active},on:{click:function(e){t.ca_active=2}}},[t._v("Conversations")]),s("li",{staticClass:"ca-sidebar-list-item",class:{"ca-active":6===t.ca_active},on:{click:function(e){t.ca_active=6}}},[t._v("Guest Conversations")]),s("li",{staticClass:"ca-sidebar-list-item",class:{"ca-active":3===t.ca_active},on:{click:function(e){t.ca_active=3}}},[t._v("Blocked & Reported")]),t.config.is_groups>0?s("li",{staticClass:"ca-sidebar-list-item",class:{"ca-active":4===t.ca_active},on:{click:function(e){t.ca_active=4}}},[t._v("User Groups")]):t._e(),s("li",{staticClass:"ca-sidebar-list-item",class:{"ca-active":5===t.ca_active},on:{click:function(e){t.ca_active=5}}},[t._v("Settings")])]),s("div",{staticClass:"ca-footer"},[t._v(t._s(t.config.footer_text))])]),s("div",{staticClass:"ca-content"},[1==t.ca_active?s("dashboard-component",{attrs:{base_url:t.base_url}}):t._e(),2==t.ca_active?s("conversations-component",{attrs:{base_url:t.base_url}}):t._e(),3==t.ca_active?s("blocked-component",{attrs:{base_url:t.base_url}}):t._e(),4==t.ca_active&&t.config.is_groups>0?s("chatgroups-component",{attrs:{base_url:t.base_url}}):t._e(),5==t.ca_active?s("settings-component",{attrs:{base_url:t.base_url}}):t._e(),6==t.ca_active?s("guest-conversations",{attrs:{base_url:t.base_url}}):t._e()],1)]):t._e()]):t._e(),null!=t.config.logged_user_id||1!=t.config.guest_mode||t.close?t._e():s("div",{staticClass:"c-animate",attrs:{id:"addchat-bot"}},[s("div",{staticClass:"c-toast c-animate ",class:[t.notify.status,"success"==t.notify.type?"c-toast-success":"c-toast-error"]},[s("span",{staticClass:"c-toast-icon"},["primary"==t.notify.type?s("i",{staticClass:"fas fa-info-circle"}):t._e(),"success"==t.notify.type?s("i",{staticClass:"fas fa-check-circle"}):t._e(),"error"==t.notify.type?s("i",{staticClass:"fas fa-times-circle"}):t._e()]),s("p",{staticClass:"c-toast-text",domProps:{innerHTML:t._s(t.notify.message)}})]),s("div",{staticClass:"c-chatbox c-active"},[t.guest_user_cookie?t._e():s("guest-component",{attrs:{guest_group_users:t.guest_group_users}}),s("div",{staticClass:"c-footer"},[s("p",{staticClass:"c-footer-text"},[t._v(t._s(t.config.footer_text))])]),t.guest_user_cookie?s("div",{staticClass:"c-buddy"},[s("span",{staticClass:"c-close"},[t._v("×")]),s("div",{staticClass:"c-buddy-image"},[s("img",{staticClass:"c-image c-online-shadow",attrs:{src:t.imageSource("")}})]),t._m(0)]):t._e(),t.guest_user_cookie?s("span",{staticClass:"c-close",on:{click:function(e){t.close=t.add({close:!0})}}},[t._v("\n            ×\n            ")]):t._e(),t.guest_user_cookie&&!t.close?s("guest-message",{attrs:{guest_group_users:t.guest_group_users}}):t._e(),t.guest_user_cookie&&!t.close?s("guest-send"):t._e(),t.config.notification_type>0?s("pusher-guests",{ref:"pusher_guest_c"}):t._e()],1)])])},c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-heading"},[s("p",{staticClass:"c-title animate"},[t._v("Admin Strator")])])}],o=(s("8e6e"),s("bc3a")),r=s.n(o),l=s("2f62"),u={methods:{imageSource:function(t){return t?base_url+this.config.img_upld_pth+"/"+t:base_url+this.config.assets_path+"/addchat/img/avatar.png"},widgetIcon:function(t){return t?base_url+this.config.img_upld_pth+"/"+t:base_url+this.config.assets_path+"/addchat/img/addchat-shadow.png"},chatLogo:function(t){return t?base_url+this.config.img_upld_pth+"/"+t:base_url+this.config.assets_path+"/addchat/img/addchat-logo-white.png"},imageAttachment:function(t){return base_url+this.config.img_upld_pth+"/"+t},showConfirm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.add({modal:{status:"c-active",message:t,action:e}})},showNotification:function(t,e){this.add({notify:{status:"c-active",message:e,type:t}}),setTimeout(function(){this.add({notify:{status:"",message:null,type:null}})}.bind(this),4e3)},findUrl:function(t){if(null!=t){var e=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,s=t.replace(e,'<a class="c-link" href="$1" target="_blank">$1</a>'),a=/(^|[^\/])(www\.[\S]+(\b|$))/gim,i=(s=s.replace(a,'$1<a  class="c-link" href="http://$2" target="_blank">$2</a>'),/(\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,6})/gim);s=s.replace(i,'<a  class="c-link" href="mailto:$1">$1</a>');return s}},fullName:function(t){if("undefined"!==typeof t){var e=t.substring(0,t.lastIndexOf("@"));return e}},rightClick:function(t,e){document.querySelector(".c-messages").addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.add({modal:{status:"c-active",message:t},messageIndex:e})},timeSince:function(t){var e=Math.floor((new Date-t)/1e3),s=Math.floor(e/31536e3);return s>1?s+" yr":(s=Math.floor(e/2592e3),s>1?s+" mon":(s=Math.floor(e/86400),s>1?s+" day":(s=Math.floor(e/3600),s>1?s+" hrs":(s=Math.floor(e/60),s>1?s+" min":Math.floor(e)+" sec"))))},imageModal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.add({image_modal:{status:"c-active",path:t}})},toFormData:function(t){var e=new FormData;return Object.keys(t).forEach(function(s){e.append(s,t[s])}),e}}},d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"touch",rawName:"v-touch:swipe",value:t.swipeHandler,expression:"swipeHandler",arg:"swipe"}],staticClass:"c-settings",class:{"c-active":3==t.active}},[s("div",{staticClass:"c-profile"},[s("form",{ref:"form",attrs:{method:"POST",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.validateForm(e)}}},[s("input",{attrs:{type:"hidden",name:t.csrf_name},domProps:{value:t.csrf_token}}),s("div",{staticClass:"c-edit c-animate"},[s("input",{directives:[{name:"validate",rawName:"v-validate"}],ref:"image",attrs:{type:"file",id:"image",name:"image",accept:".png, .jpg, .jpeg","data-vv-rules":"image|size:10485760"},on:{change:t.onFileChange}}),s("label",{attrs:{for:"image"}}),s("input",{attrs:{type:"hidden",name:"user_id"},domProps:{value:t.user.id}})]),s("img",{staticClass:"c-image-big ",class:[0==t.user.online?"c-offline-shadow":"",1==t.user.online?"c-online-shadow":"",2==t.user.online?"c-away-shadow":"",3==t.user.online?"c-busy-shadow":""],attrs:{src:t.imageSrc?t.imageSrc:t.imageSource(t.user.avatar)},on:{click:function(e){t.imageSrc?t.imageModal(t.imageSrc):t.imageModal(t.user.avatar)}}}),s("p",{staticClass:"c-title c-animate"},[t._v(t._s(t.fullname?t.fullname:t.fullName(t.user.email)))]),s("div",{staticClass:"c-inline c-animate"},[s("div",{staticClass:"c-radio-fancy c-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"c-radio-fancy-input",attrs:{type:"radio",id:"online",name:"status",value:"1"},domProps:{checked:t._q(t.status,"1")},on:{change:function(e){t.status="1"}}}),s("label",{staticClass:"c-online c-radio-fancy-label",attrs:{for:"online"}},[t._v("Online")])]),s("div",{staticClass:"c-radio-fancy c-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"c-radio-fancy-input",attrs:{type:"radio",id:"away",name:"status",value:"2"},domProps:{checked:t._q(t.status,"2")},on:{change:function(e){t.status="2"}}}),s("label",{staticClass:"c-away c-radio-fancy-label",attrs:{for:"away"}},[t._v("Away")])]),s("div",{staticClass:"c-radio-fancy c-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"c-radio-fancy-input",attrs:{type:"radio",id:"busy",name:"status",value:"3"},domProps:{checked:t._q(t.status,"3")},on:{change:function(e){t.status="3"}}}),s("label",{staticClass:"c-busy c-radio-fancy-label",attrs:{for:"busy"}},[t._v("Busy")])]),s("div",{staticClass:"c-radio-fancy c-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"c-radio-fancy-input",attrs:{type:"radio",id:"offline",name:"status",value:"0"},domProps:{checked:t._q(t.status,"0")},on:{change:function(e){t.status="0"}}}),s("label",{staticClass:"c-offline c-radio-fancy-label",attrs:{for:"offline"}},[t._v("Offline")])])]),s("div",{staticClass:"c-input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.fullname,expression:"fullname"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"fullname",staticClass:"c-input",attrs:{type:"text",name:"fullname",placeholder:"e.g John Doe"},domProps:{value:t.fullname},on:{input:function(e){e.target.composing||(t.fullname=e.target.value)}}})]),s("button",{staticClass:"c-button c-btn-primary c-btn-block",attrs:{type:"submit"}},[t._v("Save Profile")]),t.config.logged_user_id===t.config.admin_user_id?s("button",{staticClass:"c-button c-btn-neutral c-btn-block",attrs:{type:"button"},on:{click:function(e){return t.add({admin_active:!t.admin_active})}}},[t._v("Admin Panel")]):t._e()])])])},m=[],f=(s("6b54"),s("7bb1"));function p(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function g(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?p(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):p(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var v={mixins:[u],data:function(){return{status:0,fullname:null,imageSrc:null,dark_mode:null}},computed:g({},Object(l["c"])(["user","active","config","admin_active","base_url","csrf_name","csrf_token"])),methods:g({},Object(l["b"])(["add"]),{resetForm:function(){this.$refs.fullname.value=null},resetImage:function(){this.$refs.image.value=null,this.imageSrc=null},onFileChange:function(t){var e=t.target.files||t.dataTransfer.files;return!!e.length&&(-1==e[0].type.indexOf("image")?(this.showNotification("error","Upload only image!"),!1):e[0].size>10485760?(this.showNotification("error","Upload only upto 10 MB!"),!1):void this.createImage(e[0]))},createImage:function(t){var e=new FileReader,s=this;e.onload=function(t){s.image=t.target.result,s.imageSrc=t.target.result},e.readAsDataURL(t)},validateForm:function(t){var e=this;this.$validator.validateAll().then(function(s){if(s)return e.formSubmit(t),!0;e.showNotification("error",e.errors.all().toString())})},serverValidate:function(t){var e=this;this.$validator.validateAll().then(function(s){e.$validator.errors.add(t),e.showNotification("error",e.errors.all().toString()),e.errors.clear()})},formSubmit:function(t){var e=this,s=addchat_api+"profile_update",i=new FormData(this.$refs.form),n={onUploadProgress:function(t){console.log("Upload progress: "+Math.round(t.loaded/t.total*100)+"%")}};r.a.post(s,i,n).then(function(t){var s=Object(a["a"])({},csrf_name,csrf_token),i=e.toFormData(s);if(t.data.status)e.resetForm(),e.resetImage(),e.add({user:t.data.profile}),r.a.post(addchat_api+"get_config",i).then(function(t){e.add({config:t.data.config}),e.showNotification("success","Saved profile successfully")}).catch(function(t){console.log(t)});else{var n=[];n=[{field:"message",msg:t.data.response}],e.serverValidate(n)}}).catch(function(t){t&&console.log(t)})},getProfile:function(){var t=this,e=Object(a["a"])({},csrf_name,csrf_token),s=this.toFormData(e);r.a.post(addchat_api+"get_profile",s).then(function(e){t.add({user:e.data.profile}),t.status=null==t.user.online?0:t.user.online,t.fullname=t.user.fullname?t.user.fullname:t.fullName(t.user.email),t.dark_mode=t.user.dark_mode}).catch(function(t){console.log(t)})},swipeHandler:function(t){console.log(t),3==this.active&&("right"==t&&(t=null,this.config.is_groups>null?this.add({active:2}):this.add({active:1})),"left"==t&&(t=null,null!=this.user.is_guest_group?this.add({active:4}):this.add({active:1})))}}),mounted:function(){this.getProfile()},watch:{active:function(){3!==this.active&&(this.status=null==this.user.online?0:this.user.online,this.fullname=this.user.fullname?this.user.fullname:this.fullName(this.user.email),this.dark_mode=this.user.dark_mode,this.resetImage())}}},h=v,b=s("2877"),y=Object(b["a"])(h,d,m,!1,null,null,null),C=y.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"touch",rawName:"v-touch:swipe",value:t.swipeHandler,expression:"swipeHandler",arg:"swipe"}],staticClass:"c-contacts",class:{"c-active":1==t.active}},[s("vuescroll",[s("div",{staticClass:"c-buddy"},[s("div",{staticClass:"c-heading"},[s("p",{staticClass:"c-title c-animate"},[t._v("Conversations")])])]),t._l(t.search?t.search_users:t.users,function(e,a){return s("div",{key:a,staticClass:"c-contact"},[s("img",{staticClass:"c-image",attrs:{src:t.imageSource(e.avatar)},on:{click:function(s){return t.imageModal(e.avatar)}}}),s("div",{on:{click:function(s){return t.add({buddy_id:e.id,buddyIndex:a})}}},[s("p",{staticClass:"c-title"},[t._v(t._s(e.username?e.username:t.fullName(e.email)))]),s("span",{staticClass:"c-subtitle"},[t._v(t._s(e.email))]),null!=e.online?s("div",{staticClass:"c-status ",class:[0==e.online?"c-offline":"",1==e.online?"c-online":"",2==e.online?"c-away":"",3==e.online?"c-busy":""]}):t._e(),null==e.online?s("div",{staticClass:"c-status c-offline "}):t._e(),t._l(t.notifications,function(a,i){return a.users_id==e.id?s("div",{key:i,staticClass:"c-notification"},[t._v("\n                    "+t._s(a.messages_count)+" \n                ")]):t._e()})],2)])}),t.more?s("span",{staticClass:"c-more c-animate",on:{click:function(e){return t.getUsers(0)}}},[t._v("Load More")]):t._e()],2),s("div",{staticClass:"c-search"},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"c-search-input",attrs:{type:"text",placeholder:"start searching...",name:"search"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])],1)},j=[],k=s("75fc"),w=(s("386d"),s("2ef0")),P=s.n(w),x=s("77a0"),D=s.n(x);function S(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function N(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?S(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):S(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var M={components:{vuescroll:D.a},mixins:[u],data:function(){return{offset:0,more:1,search:"",search_users:null}},watch:{search:function(t,e){this.debouncedgetUsers()},active:function(){1===this.active&&this.getUsers(1)},buddy_id:function(){0===this.buddy_id&&this.getUsers(1)}},computed:N({},Object(l["c"])(["base_url","config","users","buddy_id","messages","notifications","active","buddyIndex","user"])),methods:N({},Object(l["b"])(["add","update","addMessages"]),{debouncedgetUsers:_.debounce(function(){this.getUsers(1)},500),getUsers:function(t){var e,s=this,i=(e={},Object(a["a"])(e,csrf_name,csrf_token),Object(a["a"])(e,"search",this.search),e),n=this.toFormData(i);if(1==t&&(this.offset=0,this.more=1),1==this.more){var c=addchat_api+"get_users/"+this.offset;this.search&&(c=addchat_api+"get_users/"+this.offset),r.a.post(c,n).then(function(e){var a;(s.offset=e.data.offset,s.more=e.data.more,1==s.more)&&(1==t?s.search?s.search_users=e.data.users:s.add({users:e.data.users}):s.search?(a=s.search_users).push.apply(a,Object(k["a"])(e.data.users)):s.update({users:e.data.users}))}).catch(function(t){console.log(t)})}},getUpdates:function(){var t=this;this.config.notification_type<=0&&setInterval(function(){var e,s=(e={},Object(a["a"])(e,csrf_name,csrf_token),Object(a["a"])(e,"notification",JSON.stringify(t.notifications)),e),i=t.toFormData(s);r.a.post(addchat_api+"get_updates",i).then(function(e){e.data.status&&(t.add({notifications:e.data.notification}),new Audio(base_url+t.config.assets_path+"/addchat/sound/notification.mp3").play(),t.getLatestMessage())}).catch(function(t){console.log(t)})},6e3)},getLatestMessage:function(){var t,e=(t={},Object(a["a"])(t,csrf_name,csrf_token),Object(a["a"])(t,"search",this.search),t),s=this.toFormData(e),i=this;this.notifications.length>0&&this.config.notification_type<=0&&this.notifications.forEach(function(t,e){i.buddy_id>0&&t.users_id==i.buddy_id&&r.a.post(addchat_api+"get_latest_message/"+i.buddy_id,s).then(function(t){null!==t.data.messages&&(i.messages.forEach(function(t,e){0==t.is_read&&(t.is_read=1)}),i.addMessages({messages:t.data.messages}),i.$delete(i.notifications,e))})})},swipeHandler:function(t){console.log(t),1==this.active&&("left"==t&&(t=null,this.config.is_groups>0?this.add({active:2}):this.add({active:3})),"right"==t&&(t=null,null!=this.user.is_guest_group?this.add({active:4}):this.add({active:3})))}}),mounted:function(){this.getUsers(1),this.getUpdates()}},Y=M,E=Object(b["a"])(Y,O,j,!1,null,null,null),$=E.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-buddy",class:{"c-expand":t.expand}},[s("span",{staticClass:"c-close",on:{click:function(e){t.expand=!1}}},[t._v("×")]),s("div",{staticClass:"c-buddy-image c-animate"},[s("img",{staticClass:"c-image c-online-shadow",attrs:{src:t.imageSource(t.buddy.avatar)},on:{click:function(e){1==t.expand&&t.imageModal(t.buddy.avatar),t.expand=!0}}})]),s("div",{staticClass:"c-heading"},[s("p",{staticClass:"c-title animate"},[t._v(t._s(t.buddy.name?t.buddy.name:t.fullName(t.buddy.email))),s("span",{staticClass:"c-subtitle animate"},[t._v(t._s(0==t.buddy.status?"Offline":1==t.buddy.status?"Online":2==t.buddy.status?"Away":3==t.buddy.status?"Busy":"Offline"))])])]),s("div",{staticClass:"c-options"},[t.buddy.is_contact?t._e():s("span",{staticClass:"c-button-round",on:{click:function(e){return t.showConfirm("Yes add it",1)}}},[s("i",{staticClass:"c-add-contact"})]),t.buddy.is_contact?s("span",{staticClass:"c-button-round",on:{click:function(e){return t.showConfirm("Yes remove it",2)}}},[s("i",{staticClass:"c-remove-contact"})]):t._e(),s("span",{staticClass:"c-button-round",on:{click:function(e){return t.showConfirm("Yes delete chat ",4)}}},[s("i",{staticClass:"c-delete"})]),t.buddy.id!=t.config.admin_user_id?s("span",{staticClass:"c-button-round",on:{click:function(e){return t.showConfirm("Yes block it",3)}}},[s("i",{staticClass:"c-block"})]):t._e(),t.buddy.id!=t.config.admin_user_id?s("span",{staticClass:"c-button-round",on:{click:function(e){return t.showConfirm("Yes report ",5)}}},[s("i",{staticClass:"c-report"})]):t._e()]),t.modal.action>0?s("div",{staticClass:"c-modal c-animate ",class:[t.modal.status],attrs:{tabindex:"-1"}},[s("div",{staticClass:"c-modal-dialog c-modal-dialog-centered"},[s("div",{staticClass:"c-modal-content"},[s("div",{staticClass:"c-modal-body"},[s("div",{staticClass:"c-card"},[s("div",{staticClass:"c-card-header"},[s("h6",{staticClass:"c-card-title"},[t._v("Are Your Sure")]),s("span",{staticClass:"c-close",on:{click:function(e){return t.add({modal:{status:"",message:null,action:0}})}}},[t._v("\n                            ×")])]),s("div",{staticClass:"c-card-body"},[1==t.modal.action?s("button",{staticClass:"c-button c-btn-neutral c-btn-block",attrs:{type:"button"},on:{click:function(e){return t.addContacts(t.buddy.id)}}},[t._v("\n                                "+t._s(t.modal.message)+"\n                            ")]):t._e(),2==t.modal.action?s("button",{staticClass:"c-button c-btn-neutral c-btn-block",attrs:{type:"button"},on:{click:function(e){return t.removeContacts(t.buddy.id)}}},[t._v("\n                                "+t._s(t.modal.message)+"\n                            ")]):t._e(),3==t.modal.action?s("button",{staticClass:"c-button c-btn-neutral c-btn-block",attrs:{type:"button"},on:{click:function(e){return t.blockUser(t.buddy.id)}}},[t._v("\n                                "+t._s(t.modal.message)+"\n                            ")]):t._e(),4==t.modal.action?s("button",{staticClass:"c-button c-btn-neutral c-btn-block",attrs:{type:"button"},on:{click:function(e){return t.deleteChat(t.buddy.id)}}},[t._v("\n                                "+t._s(t.modal.message)+"\n                            ")]):t._e(),5==t.modal.action?s("button",{staticClass:"c-button c-btn-neutral c-btn-block",attrs:{type:"button"},on:{click:function(e){return t.reportUser(t.buddy.id)}}},[t._v("\n                                "+t._s(t.modal.message)+"\n                            ")]):t._e()])])])])])]):t._e()])},U=[];function F(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function q(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?F(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):F(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var A={mixins:[u],data:function(){return{expand:!1}},computed:q({},Object(l["c"])(["base_url","config","buddy","buddy_id","users","buddyIndex","is_contact","modal"])),methods:q({},Object(l["b"])(["add","update"]),{deleteChat:function(t){var e=this,s=Object(a["a"])({},csrf_name,csrf_token),i=this.toFormData(s);r.a.post(addchat_api+"delete_chat/"+t,i).then(function(t){e.add({modal:{status:"",message:null,action:0}}),t.data.status&&(e.add({messages:[]}),e.showNotification("success","Messages deleted!!!"))}).catch(function(t){console.log(t)})},blockUser:function(t){var e=this,s=Object(a["a"])({},csrf_name,csrf_token),i=this.toFormData(s);r.a.post(addchat_api+"block_user/"+t,i).then(function(t){e.add({modal:{status:"",message:null,action:0}}),t.data.status&&(e.add({users:e.$delete(e.users,e.buddyIndex),buddy_id:0}),e.showNotification("success","Blocked user successfully"))}).catch(function(t){console.log(t)})},removeContacts:function(t){var e=this,s=Object(a["a"])({},csrf_name,csrf_token),i=this.toFormData(s);r.a.post(addchat_api+"remove_contacts/"+t,i).then(function(t){e.add({modal:{status:"",message:null,action:0}}),t.data.status&&(e.update({is_contact:0}),e.add({buddy_id:0}),e.$delete(e.users,e.buddyIndex),e.showNotification("success","Removed user successfully"))}).catch(function(t){console.log(t)})},addContacts:function(t){var e=this,s=Object(a["a"])({},csrf_name,csrf_token),i=this.toFormData(s);r.a.post(addchat_api+"add_contacts/"+t,i).then(function(t){e.add({modal:{status:"",message:null,action:0}}),t.data.status&&(e.update({is_contact:1}),e.showNotification("success","Add user successfully"))}).catch(function(t){console.log(t)})},reportUser:function(t){var e=this,s=Object(a["a"])({},csrf_name,csrf_token),i=this.toFormData(s),n=1;r.a.post(addchat_api+"block_user/"+t+"/"+n,i).then(function(t){e.add({modal:{status:"",message:null,action:0}}),t.data.status&&(e.add({users:e.$delete(e.users,e.buddyIndex),buddy_id:0}),e.showNotification("success","Reported user successfully"))}).catch(function(t){console.log(t)})},getBuddy:function(){var t=this;this.$store.watch(function(t){return t.buddy_id},function(){if(t.buddy_id>0){var e,s=(e={},Object(a["a"])(e,csrf_name,csrf_token),Object(a["a"])(e,"user",t.buddy_id),e),i=t.toFormData(s);r.a.post(addchat_api+"get_buddy",i).then(function(e){t.add({buddy:e.data.buddy})}).catch(function(t){console.log(t)})}})}}),mounted:function(){this.getBuddy()}},I=A,H=Object(b["a"])(I,G,U,!1,null,null,null),L=H.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.buddy_id?s("div",{staticClass:"c-messages"},[t.modal.action?t._e():s("div",{staticClass:"c-modal c-animate ",class:[t.modal.status],attrs:{tabindex:"-1"}},[s("div",{staticClass:"c-modal-dialog c-modal-dialog-centered"},[s("div",{staticClass:"c-modal-content"},[s("div",{staticClass:"c-modal-body"},[s("div",{staticClass:"c-card"},[s("div",{staticClass:"c-card-header"},[s("h6",{staticClass:"c-card-title"},[t._v("Message Actions")]),s("span",{staticClass:"c-close",on:{click:function(e){return t.add({modal:{status:"",message:null},messageIndex:null})}}},[t._v("\n                            ×")])]),t.modal.message?s("div",{staticClass:"c-card-body"},[t.modal.message.sender==t.config.logged_user_id?s("button",{staticClass:"c-button c-btn-neutral c-btn-block",attrs:{type:"button"},on:{click:function(e){return t.unSend(t.modal.message.message_id?t.modal.message.message_id:t.modal.message.id)}}},[t._v("\n                                Unsend\n                            ")]):t._e(),s("button",{staticClass:"c-button c-btn-neutral c-btn-block",attrs:{type:"button"},on:{click:function(e){return t.msgDelete(t.modal.message.message_id?t.modal.message.message_id:t.modal.message.id)}}},[t._v("\n                                Delete\n                            ")]),s("button",{staticClass:"c-button c-btn-neutral c-btn-block",attrs:{type:"button"},on:{click:function(e){t.messageQuote(t.modal.message.message_id?t.modal.message.message_id:t.modal.message.id,t.modal.message.sender,t.modal.message.message,t.modal.message.sender==t.config.logged_user_id?"You":t.buddy.name?t.buddy.name:t.fullName(t.buddy.email))}}},[t._v("\n                                Reply\n                            ")])]):t._e()])])])])]),s("vuescroll",{ref:"vs",attrs:{ops:t.ops},on:{"handle-resize":t.handleScroll}},[t.more?s("span",{staticClass:"c-more c-animate",on:{click:function(e){return t.getMessages(0)}}},[t._v("Load older")]):t._e(),t._l(t.messages,function(e,a){return s("div",{key:a,staticClass:"c-message c-animate",class:e.sender==t.config.logged_user_id?"c-reply":""},[0==a||a>0&&t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD")!=t.moment(t.messages[a-1].dt_updated,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD")?s("label",{staticClass:"c-daystamp c-animate"},[t._v("\n                "+t._s(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("MMMM Do YYYY"))+"\n                \n            ")]):t._e(),s("div",{directives:[{name:"longclicke",rawName:"v-longclicke",value:function(){return t.rightClick(e,a)},expression:"() => rightClick(message, index)"}],staticClass:"c-quote",class:[e.m_reply_id>0?"c-active":"",e.sender==t.config.logged_user_id?"c-you":"c-sender"],attrs:{oncontextmenu:"rightClick( message, index)"},on:{contextmenu:function(s){return s.preventDefault(),t.rightClick(e,a)}}},[s("span",{staticClass:"c-subtitle"},[t._v(t._s(e.reply_user_id==t.config.logged_user_id?"You":t.buddy.name?t.buddy.name:t.fullName(t.buddy.email)))]),s("p",{directives:[{name:"linkified",rawName:"v-linkified"}],staticClass:"c-text",domProps:{innerHTML:t._s(t.findUrl(e.quote_message))}})]),s("div",{staticClass:"c-bubble-wrapper"},[s("div",{directives:[{name:"longclick",rawName:"v-longclick",value:function(){return t.rightClick(e,a)},expression:"() => rightClick(message, index)"},{name:"linkified",rawName:"v-linkified"}],staticClass:"c-bubble c-animate",domProps:{innerHTML:t._s(t.findUrl(e.message))},on:{contextmenu:function(s){return t.rightClick(e,a)}}})]),s("span",{staticClass:"c-timestamp c-animate"},[t._v(t._s(t.timeSince(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss "))))]),s("span",{staticClass:"c-read c-sent c-animate",class:{"c-active":e.sender==t.config.logged_user_id&&0==e.is_read}}),s("span",{staticClass:"c-read c-seen c-animate",class:{"c-active":e.sender==t.config.logged_user_id&&1==e.is_read}}),s("span",{staticClass:"c-reply-icon c-animate",on:{click:function(s){t.messageQuote(e.message_id,e.sender,e.message,e.sender==t.config.logged_user_id?"You":t.buddy.name?t.buddy.name:t.fullName(t.buddy.email))}}}),e.attachment?s("img",{staticClass:"c-image-attachment c-animate",attrs:{src:t.imageAttachment(e.attachment)}}):t._e()])})],2)],1):t._e()},z=[];function R(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function B(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?R(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):R(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var V={components:{vuescroll:D.a},mixins:[u],data:function(){return{offset:0,more:1,date:null,moment:moment,ops:{vuescroll:{},scrollPanel:{initialScrollY:100,initialScrollX:!1,scrollingX:!1,scrollingY:!0,speed:300,easing:void 0,verticalNativeBarPos:"right"},rail:{},bar:{}}}},computed:B({},Object(l["c"])(["base_url","config","users","messages","user","buddy_id","buddy","messageReply","notifications","modal","message_quote","messageIndex"])),methods:B({},Object(l["b"])(["add","update","prepend"]),{getMessages:function(t){var e=this,s=Object(a["a"])({},csrf_name,csrf_token),i=this.toFormData(s);1==t&&(this.offset=0,this.more=1),1==this.more&&this.buddy_id>0&&r.a.post(addchat_api+"get_messages/"+this.buddy_id+"/"+this.offset,i).then(function(s){if(s.data.status){if(1==t){var a=e.buddy_id,i=null;e.notifications.length>0&&e.notifications.forEach(function(t,e){t.users_id===a&&(i=e)}),null!==i&&e.$delete(e.notifications,i),e.add({messages:s.data.messages})}else e.prepend({messages:s.data.messages});e.more=s.data.more,e.offset=s.data.offset}}).catch(function(t){console.log(t)})},messageQuote:function(t,e,s,a){this.add({message_quote:{m_reply_id:t,reply_user_id:e,message:s,name:a}}),this.add({modal:{status:"",message:null}})},unSend:function(t){var e=this,s=Object(a["a"])({},csrf_name,csrf_token),i=this.toFormData(s);r.a.post(addchat_api+"message_unsend/"+t,i).then(function(t){t.data.status?(null!==e.messageIndex&&e.$delete(e.messages,e.messageIndex),e.showNotification("success",t.data.message)):e.showNotification("error",t.data.message),e.add({modal:{status:"",message:null},messageIndex:null})}).catch(function(t){console.log(t)})},msgDelete:function(t){var e=this,s=Object(a["a"])({},csrf_name,csrf_token),i=this.toFormData(s);r.a.post(addchat_api+"message_delete/"+t,i).then(function(t){t.data.status?(null!==e.messageIndex&&e.$delete(e.messages,e.messageIndex),e.showNotification("success",t.data.message)):e.showNotification("errror",t.data.message),e.add({modal:{status:"",message:null},messageIndex:null})}).catch(function(t){console.log(t)})},handleScroll:function(t,e,s){this.$refs["vs"].scrollBy({dy:200})}}),mounted:function(){var t=this;this.$store.watch(function(t){return t.buddy_id},function(){t.getMessages(1)})}},J=V,X=Object(b["a"])(J,T,z,!1,null,null,null),Z=X.exports,Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-send"},[s("form",{ref:"form",attrs:{method:"POST",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.validateForm(e)}}},[s("input",{attrs:{type:"hidden",name:t.csrf_name},domProps:{value:t.csrf_token}}),s("div",{staticClass:"c-quote-image c-animate",class:t.imageSrc?"c-active":""},[s("span",{staticClass:"c-close",on:{click:t.resetImage}},[t._v("×")]),s("img",{attrs:{src:t.imageSrc}})]),s("div",{staticClass:"c-quote c-you c-animate",class:{"c-active":t.message_quote.m_reply_id}},[s("span",{staticClass:"c-close",on:{click:function(e){return t.replyRemove()}}},[t._v("×")]),s("span",{staticClass:"c-subtitle"},[t._v(t._s(t.message_quote.name))]),s("p",{directives:[{name:"linkified",rawName:"v-linkified"}],staticClass:"c-text",domProps:{innerHTML:t._s(t.findUrl(t.message_quote.message))}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.buddy_id,expression:"buddy_id"}],attrs:{type:"hidden",name:"user"},domProps:{value:t.buddy_id},on:{input:function(e){e.target.composing||(t.buddy_id=e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.message_quote.m_reply_id,expression:"message_quote.m_reply_id"}],attrs:{type:"hidden",name:"m_reply_id"},domProps:{value:t.message_quote.m_reply_id},on:{input:function(e){e.target.composing||t.$set(t.message_quote,"m_reply_id",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.message_quote.reply_user_id,expression:"message_quote.reply_user_id"}],attrs:{type:"hidden",name:"reply_user_id"},domProps:{value:t.message_quote.reply_user_id},on:{input:function(e){e.target.composing||t.$set(t.message_quote,"reply_user_id",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.message_quote.message,expression:"message_quote.message"}],attrs:{type:"hidden",name:"quote_message"},domProps:{value:t.message_quote.message},on:{input:function(e){e.target.composing||t.$set(t.message_quote,"message",e.target.value)}}})]),t.typing?s("div",{staticClass:"c-typing-wrapper"},[s("div",{staticClass:"c-typing-text"},[t._v("\n                "+t._s(t.typing_user.fullname?t.typing_user.fullname+" is typing":t.fullName(t.typing_user.email)+" is typing")+"\n            ")]),t._m(0)]):t._e(),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],ref:"message",staticClass:"c-send-textarea",attrs:{rows:"1",name:"message",placeholder:"Send a message ..."},domProps:{value:t.message},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.triggerSubmit(e)},focus:function(e){t.dialogHidden=!0},keydown:function(e){return t.isTyping()},input:function(e){e.target.composing||(t.message=e.target.value)}}}),s("span",{staticClass:"c-emoji-button c-animate",on:{click:t.toogleDialogEmoji}}),s("div",{staticClass:"c-emoji-popup c-animate",attrs:{hidden:t.dialogHidden}},[s("VEmojiPicker",{attrs:{pack:t.emojisNative,showSearch:!1},on:{select:t.onSelectEmoji}})],1),s("div",{staticClass:"c-message-options c-animate"},[s("div",{staticClass:"c-attach"},[s("input",{directives:[{name:"validate",rawName:"v-validate"}],ref:"myFileInput",attrs:{type:"file",name:"attachment",accept:".png, .jpg, .jpeg","data-vv-rules":"image|size:10485760"},on:{change:t.onFileChange}})])]),s("button",{ref:"submit",staticClass:"c-button-round",attrs:{type:"submit"}},[s("i",{staticClass:"c-send-message c-animate"})])])])},K=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-typing"},[s("div",{staticClass:"c-typing-indicator"}),s("div",{staticClass:"c-typing-indicator"}),s("div",{staticClass:"c-typing-indicator"}),s("div",{staticClass:"c-typing-indicator"})])}],W=s("4548"),tt=s.n(W),et=s("b652");function st(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function at(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?st(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):st(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var it={mixins:[u],data:function(){return{message:"",attachment:null,imageSrc:null,dialogHidden:!0}},components:{VEmojiPicker:tt.a},computed:at({},Object(l["c"])(["base_url","buddy","buddy_id","messages","message_quote","config","csrf_name","csrf_token","user","config","typing","typing_user"]),{emojisNative:function(){return et["a"]}}),methods:at({},Object(l["b"])(["add","update"]),{toogleDialogEmoji:function(){this.dialogHidden=!this.dialogHidden},onSelectEmoji:function(t){this.message+=t.emoji},triggerSubmit:function(){},replyRemove:function(){this.update({message_quote:1})},resetForm:function(){this.message=null,this.dialogHidden=!0,this.resetImage(),this.replyRemove()},resetImage:function(){this.$refs.myFileInput.value=null,this.imageSrc=null},onFileChange:function(t){var e=t.target.files||t.dataTransfer.files;return!!e.length&&(-1==e[0].type.indexOf("image")?(this.showNotification("error","Upload only image!"),!1):e[0].size>10485760?(this.showNotification("error","Upload only upto 10 MB!"),!1):void this.createImage(e[0]))},createImage:function(t){var e=new FileReader,s=this;e.onload=function(t){s.attachment=t.target.result,s.imageSrc=t.target.result},e.readAsDataURL(t)},validateForm:function(t){var e=this;this.$validator.validateAll().then(function(s){if(s)return e.formSubmit(t),!0;e.showNotification("error",e.errors.all().toString())})},serverValidate:function(t){var e=this;this.$validator.validateAll().then(function(s){e.$validator.errors.add(t),e.showNotification("error",e.errors.all().toString()),e.errors.clear()})},formSubmit:function(t){var e=this,s=addchat_api+"send_message",a=new FormData(this.$refs.form),i={onUploadProgress:function(t){console.log("Upload progress: "+Math.round(t.loaded/t.total*100)+"%")}};r.a.post(s,a,i).then(function(t){if(t.data.status)e.resetForm(),e.update({messages:t.data.message});else{[{field:"message",msg:t.data.response}]}}).catch(function(t){t&&console.log(t)})},isTyping:function(){this.config.notification_type>0&&this.$parent.isTyping()}})},nt=it,ct=Object(b["a"])(nt,Q,K,!1,null,null,null),ot=ct.exports,rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"touch",rawName:"v-touch:swipe",value:t.swipeHandler,expression:"swipeHandler",arg:"swipe"}],staticClass:"c-groups",class:{"c-active":2==t.active}},[s("vuescroll",[s("div",{staticClass:"c-buddy "},[s("div",{staticClass:"c-heading"},[s("p",{staticClass:"c-title c-animate"},[t._v("User Groups")])])]),t._l(t.groups,function(e,a){return s("div",{key:a,staticClass:"c-group",on:{click:function(s){return t.groupUsers(e.id)}}},[s("p",{staticClass:"c-title"},[t._v(t._s(e.name))]),s("p",{staticClass:"c-subtitle"},[t._v(t._s(e.group_users_count?e.group_users_count:0)+" Members")])])}),s("div",{staticClass:"c-contacts ",class:{"c-active":t.cActive}},[s("vuescroll",[s("div",{staticClass:"c-buddy"},[s("span",{staticClass:"c-close",on:{click:function(e){t.cActive=!1,t.usersGroup=[],t.offset=0}}},[t._v("×")]),t._l(t.groups,function(e,a){return e.id==t.groupId?s("div",{key:a,staticClass:"c-heading"},[s("p",{staticClass:"c-title c-animate"},[t._v(t._s(e.name))]),s("p",{staticClass:"c-subtitle"},[t._v(t._s(e.group_users_count?e.group_users_count:0)+" Members")])]):t._e()})],2),t._l(t.usersGroup,function(e,a){return s("div",{key:a,staticClass:"c-contact"},[s("img",{staticClass:"c-image",attrs:{src:t.imageSource(e.avatar)},on:{click:function(s){return t.imageModal(e.avatar)}}}),s("div",{on:{click:function(s){return t.add({buddy_id:e.id,buddyIndex:a})}}},[s("p",{staticClass:"c-title"},[t._v(t._s(e.username?e.username:t.fullName(e.email)))]),s("span",{staticClass:"c-subtitle"},[t._v(t._s(e.email))]),null!=e.online?s("div",{staticClass:"c-status",class:[0==e.online?"c-offline":"",1==e.online?"c-online":"",2==e.online?"c-away":"",3==e.online?"c-busy":""]}):t._e(),null==e.online?s("div",{staticClass:"c-status c-offline "}):t._e(),t._l(t.notifications,function(a,i){return a.users_id==e.id?s("div",{key:i,staticClass:"c-notification"},[t._v(t._s(a.messages_count))]):t._e()})],2)])}),t.more?s("span",{staticClass:"c-more c-animate",on:{click:function(e){return t.groupUsers(t.groupId)}}},[t._v("Load More")]):t._e()],2)],1)],2)],1)},lt=[];s("c5f6");function ut(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function dt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?ut(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ut(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var mt={components:{vuescroll:D.a},mixins:[u],data:function(){return{groups:Array,cActive:!1,usersGroup:Array(0),groupId:Number,offset:0,more:1}},computed:dt({},Object(l["c"])(["base_url","buddy_id","buddy","active","config","notifications"])),methods:dt({},Object(l["b"])(["add","update"]),{groupUsers:function(t){var e=this,s=Object(a["a"])({},csrf_name,csrf_token),i=this.toFormData(s);this.cActive=!0,this.groupId=t,r.a.post(addchat_api+"get_groupschat_users/"+t+"/"+this.offset,i).then(function(t){if(t.data.status){var s;if(e.usersGroup.length>0)(s=e.usersGroup).push.apply(s,Object(k["a"])(t.data.group_users));else e.usersGroup=t.data.group_users;e.offset=t.data.offset,e.more=t.data.more}}).catch(function(t){console.log(t)})},getGroups:function(){var t=this,e=Object(a["a"])({},csrf_name,csrf_token),s=this.toFormData(e);r.a.post(addchat_api+"get_groups",s).then(function(e){e.data.status&&(t.groups=e.data.groups)}).catch(function(t){console.log(t)})},swipeHandler:function(t){console.log(t),2==this.active&&("right"==t&&(t=null,this.add({active:1})),"left"==t&&(t=null,this.add({active:3})))}}),mounted:function(){this.getGroups()},watch:{active:function(){2===this.active&&this.getGroups()}}},ft=mt,pt=Object(b["a"])(ft,rt,lt,!1,null,null,null),gt=pt.exports,_t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-guestbox c-active"},[s("div",{staticClass:"c-gbuddy"},[s("span",{staticClass:"c-close",on:{click:function(e){return t.add({close:!0})}}},[t._v("\n            ×\n        ")]),s("div",{staticClass:"c-brand"},[s("img",{staticClass:"c-brand-image",attrs:{src:t.chatLogo(t.config.site_logo)}}),s("h3",{staticClass:"c-brand-title"},[t._v(t._s(t.config.site_name))]),s("p",{staticClass:"c-brand-subtitle"},[t._v("Chat with support team")])]),t.guest_group_users.length>0?s("div",{staticClass:"c-team"},t._l(t.guest_group_users,function(e,a){return a<=3?s("div",{key:a,staticClass:"c-team-member"},[s("img",{staticClass:"c-image",attrs:{src:t.imageSource(e.avatar)}}),s("p",{staticClass:"c-subtitle"},[t._v(t._s(e.username?e.username:t.fullName(e.email)))])]):t._e()}),0):t._e()]),s("div",{staticClass:"c-gform"},[s("form",{ref:"form",attrs:{method:"POST"},on:{submit:function(e){return e.preventDefault(),t.validateForm(e)}}},[s("input",{attrs:{type:"hidden",name:t.csrf_name},domProps:{value:t.csrf_token}}),s("div",{staticClass:"c-input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.fullname,expression:"fullname"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"fullname",staticClass:"c-input",attrs:{type:"text",name:"fullname",placeholder:"Your Name"},domProps:{value:t.fullname},on:{input:function(e){e.target.composing||(t.fullname=e.target.value)}}})]),s("div",{staticClass:"c-input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"email",staticClass:"c-input",attrs:{type:"text",name:"email",placeholder:"Your Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),s("button",{staticClass:"c-button c-btn-block c-btn-neutral",attrs:{type:"submit"}},[t._v("Let's Chat")])])])])},vt=[];function ht(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function bt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?ht(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ht(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var yt={mixins:[u],props:["guest_group_users"],data:function(){return{fullname:null,email:null}},computed:bt({},Object(l["c"])(["user","active","config","admin_active","base_url","guest_user_cookie","csrf_token","csrf_name","close"])),methods:bt({},Object(l["b"])(["add","update"]),{validateForm:function(t){var e=this;this.$validator.validateAll().then(function(s){if(s)return e.formSubmit(t),!0;e.showNotification("error",e.errors.all().toString())})},serverValidate:function(t){var e=this;this.$validator.validateAll().then(function(s){e.$validator.errors.add(t),e.showNotification("error",e.errors.all().toString()),e.errors.clear()})},formSubmit:function(t){var e=this,s=addchat_api+"guest_login",a=new FormData(this.$refs.form),i={onUploadProgress:function(t){console.log("Upload progress: "+Math.round(t.loaded/t.total*100)+"%")}};r.a.post(s,a,i).then(function(t){if(t.data.status)e.showNotification("success","Continue"),e.$cookie.set("guest",t.data.guest_user_id),e.$parent.getGuestUser(),e.add({guest_user_cookie:!0});else{var s=[];s=[{field:"message",msg:t.data.response}],e.serverValidate(s)}}).catch(function(t){t&&console.log(t)})}}),mounted:function(){}},Ct=yt,Ot=Object(b["a"])(Ct,_t,vt,!1,null,null,null),jt=Ot.exports,kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-messages"},[s("vuescroll",{ref:"vs",attrs:{ops:t.ops},on:{"handle-resize":t.handleScroll}},[t.more?s("span",{staticClass:"c-more c-animate",on:{click:function(e){return t.getGuestMessages(0)}}},[t._v("Load older")]):t._e(),t._l(t.guest_messages,function(e,a){return s("div",{key:a,staticClass:"c-message c-animate",class:e.g_from==t.guest_id?"c-reply":""},[0==a||a>0&&t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD")!=t.moment(t.guest_messages[a-1].dt_updated,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD")?s("span",{staticClass:"c-daystamp c-animate"},[t._v("\n                "+t._s(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("MMMM Do YYYY"))+"\n                \n            ")]):t._e(),e.m_from>0?s("div",{staticClass:"c-tsender"},[s("img",{staticClass:"c-tsender-image",attrs:{src:t.imageSource(e.m_from_image),title:e.m_from_name}})]):t._e(),s("div",{staticClass:"c-bubble-wrapper"},[s("div",{directives:[{name:"linkified",rawName:"v-linkified"}],staticClass:"c-bubble c-animate",domProps:{innerHTML:t._s(t.findUrl(e.message))}})]),s("span",{staticClass:"c-timestamp c-animate"},[t._v(t._s(t.timeSince(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss "))))]),s("span",{staticClass:"c-read c-sent c-animate",class:{"c-active":e.g_from==t.guest_id&&0==e.is_read}}),s("span",{staticClass:"c-read c-seen c-animate",class:{"c-active":e.g_from==t.guest_id&&1==e.is_read}})])})],2)],1)},wt=[];function Pt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function xt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Pt(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Pt(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var Dt={components:{vuescroll:D.a},mixins:[u],props:["guest_group_users"],data:function(){return{offset:0,more:1,date:null,moment:moment,ops:{vuescroll:{},scrollPanel:{initialScrollY:100,initialScrollX:!1,scrollingX:!1,scrollingY:!0,speed:300,easing:void 0,verticalNativeBarPos:"right"},rail:{},bar:{}}}},computed:xt({},Object(l["c"])(["base_url","config","guest_id","notifications","guest_messages","guest_notifications"])),methods:xt({},Object(l["b"])(["add","update","prepend"]),{getGuestMessages:function(t){var e=this;if(1==t&&(this.offset=0,this.more=1),1==this.more&&null!=this.$cookie.get("guest")){var s,i=(s={},Object(a["a"])(s,csrf_name,csrf_token),Object(a["a"])(s,"guest_id",this.$cookie.get("guest")),Object(a["a"])(s,"offset",this.offset),s),n=this.toFormData(i);r.a.post(addchat_api+"get_messages_of_guest",n).then(function(s){s.data.status&&(1==t?e.add({guest_messages:s.data.messages}):e.prepend({guest_messages:s.data.messages}),e.more=s.data.more,e.offset=s.data.offset,e.add({guest_notifications:[]}))}).catch(function(t){console.log(t)})}},handleScroll:function(t,e,s){this.$refs["vs"].scrollBy({dy:200})}}),mounted:function(){this.getGuestMessages(1)},beforeDestroy:function(){this.add({guest_notifications:[]}),console.log("hello")}},St=Dt,Nt=Object(b["a"])(St,kt,wt,!1,null,null,null),Mt=Nt.exports,Yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"touch",rawName:"v-touch:swipe",value:t.swipeHandler,expression:"swipeHandler",arg:"swipe"}],staticClass:"c-contacts",class:{"c-active":4==t.active}},[s("vuescroll",[s("div",{staticClass:"c-buddy"},[s("div",{staticClass:"c-heading"},[s("p",{staticClass:"c-title c-animate"},[t._v("Guest/Customer Support")])])]),t._l(t.search?t.search_guests:t.guest_users,function(e,a){return s("div",{key:a,staticClass:"c-contact",on:{click:function(s){return t.add({guest_id:e.id})}}},[s("img",{staticClass:"c-image",attrs:{src:t.imageSource("")}}),s("p",{staticClass:"c-title"},[t._v(t._s(e.fullname))]),s("span",{staticClass:"c-subtitle"},[t._v(t._s(e.email))]),t._l(t.guest_notifications,function(a,i){return a.g_from==e.id?s("div",{key:i,staticClass:"c-notification"},[t._v("\n                "+t._s(a.messages_count)+" \n            ")]):t._e()})],2)}),t.more?s("span",{staticClass:"c-more c-animate",on:{click:function(e){return t.getGuest(0)}}},[t._v("Load More")]):t._e()],2),s("div",{staticClass:"c-search"},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"c-search-input",attrs:{type:"text",placeholder:"start searching...",name:"search"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])],1)},Et=[];function $t(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function Gt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?$t(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):$t(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var Ut={components:{vuescroll:D.a},mixins:[u],data:function(){return{offset:0,more:1,search:"",search_guests:[],guest_users:[]}},watch:{search:function(t,e){this.debouncedgetGuset()},active:function(){4===this.active&&this.getGuest(1)},buddy_id:function(){0===this.buddy_id&&this.getGuest(1)}},computed:Gt({},Object(l["c"])(["base_url","config","guest_messages","guest_notifications","active","guest_id","user"])),methods:Gt({},Object(l["b"])(["add","update","addMessages"]),{debouncedgetGuset:_.debounce(function(){this.getGuest(1)},500),getGuest:function(t){var e,s=this,i=(e={},Object(a["a"])(e,csrf_name,csrf_token),Object(a["a"])(e,"search",this.search),e),n=this.toFormData(i);if(1==t&&(this.offset=0,this.more=1),1==this.more){var c=addchat_api+"get_guests/"+this.offset;this.search&&(c=addchat_api+"get_guests/"+this.offset),r.a.post(c,n).then(function(e){var a,i;(s.offset=e.data.offset,s.more=e.data.more,1==s.more)&&(1==t?s.search?s.search_guests=e.data.guest_users:s.guest_users=e.data.guest_users:s.search?(a=s.search_guests).push.apply(a,Object(k["a"])(e.data.guest_users)):(i=s.guest_users).push.apply(i,Object(k["a"])(e.data.guest_users)))}).catch(function(t){console.log(t)})}},getGuestUpdates:function(){var t=this;this.config.notification_type<=0&&setInterval(function(){var e,s=(e={},Object(a["a"])(e,csrf_name,csrf_token),Object(a["a"])(e,"notification",JSON.stringify(t.guest_notifications)),Object(a["a"])(e,"guest_id",t.$cookie.get("guest")),e),i=t.toFormData(s);r.a.post(addchat_api+"get_guest_updates",i).then(function(e){e.data.status&&(t.add({guest_notifications:e.data.guest_notifications}),new Audio(base_url+t.config.assets_path+"/addchat/sound/notification.mp3").play(),t.getGuestLatestMessage())}).catch(function(t){console.log(t)})},6e3)},getGuestLatestMessage:function(){var t,e=(t={},Object(a["a"])(t,csrf_name,csrf_token),Object(a["a"])(t,"search",this.search),t),s=this.toFormData(e),i=this;this.guest_notifications.length>0&&this.config.notification_type<=0&&this.guest_notifications.forEach(function(t,e){i.guest_id>0&&t.g_from==i.guest_id&&r.a.post(addchat_api+"get_guest_latest_message/"+i.guest_id,s).then(function(t){null!==t.data.messages&&(i.guest_messages.forEach(function(t,e){0==t.is_read&&(t.is_read=1)}),i.addMessages({guest_messages:t.data.messages}),i.$delete(i.guest_notifications,e))})})},swipeHandler:function(t){console.log(t),4==this.active&&("right"==t&&(t=null,this.add({active:3})),"left"==t&&this.add({active:1}))}}),mounted:function(){null!=this.user.is_guest_group&&(this.getGuest(1),this.getGuestUpdates())}},Ft=Ut,qt=Object(b["a"])(Ft,Yt,Et,!1,null,null,null),At=qt.exports,It=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.guest_id?s("div",{staticClass:"c-messages"},[t.modal.message&&t.modal.message.sender==t.config.logged_user_id?s("div",{staticClass:"c-modal c-animate ",class:[t.modal.status],attrs:{tabindex:"-1"}},[s("div",{staticClass:"c-modal-dialog c-modal-dialog-centered"},[s("div",{staticClass:"c-modal-content"},[s("div",{staticClass:"c-modal-body"},[s("div",{staticClass:"c-card"},[s("div",{staticClass:"c-card-header"},[s("h6",{staticClass:"c-card-title"},[t._v("Message Actions")]),s("span",{staticClass:"c-close",on:{click:function(e){return t.add({modal:{status:"",message:null},messageIndex:null})}}},[t._v("\n                            ×")])]),s("div",{staticClass:"c-card-body"},[t.modal.message.sender==t.config.logged_user_id?s("button",{staticClass:"c-button c-btn-neutral c-btn-block",attrs:{type:"button"},on:{click:function(e){return t.unSend(t.modal.message.message_id?t.modal.message.message_id:t.modal.message.id)}}},[t._v("\n                                Unsend\n                            ")]):t._e()])])])])])]):t._e(),s("vuescroll",{ref:"vs",attrs:{ops:t.ops},on:{"handle-resize":t.handleScroll}},[t.more?s("span",{staticClass:"c-more c-animate",on:{click:function(e){return t.getGuestMessages(0)}}},[t._v("Load older")]):t._e(),t._l(t.guest_messages,function(e,a){return s("div",{key:a,staticClass:"c-message c-animate",class:e.sender==t.config.logged_user_id?"c-reply":""},[0==a||a>0&&t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD")!=t.moment(t.guest_messages[a-1].dt_updated,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD")?s("label",{staticClass:"c-daystamp c-animate"},[t._v("\n                "+t._s(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("MMMM Do YYYY"))+"\n                \n            ")]):t._e(),s("div",{staticClass:"c-bubble-wrapper"},[s("div",{directives:[{name:"longclick",rawName:"v-longclick",value:function(){return t.rightClick(e,a)},expression:"() => rightClick(message, index)"},{name:"linkified",rawName:"v-linkified"}],staticClass:"c-bubble c-animate",domProps:{innerHTML:t._s(t.findUrl(e.message))},on:{contextmenu:function(s){return t.rightClick(e,a)}}})]),s("span",{staticClass:"c-timestamp c-animate"},[t._v(t._s(t.timeSince(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss "))))]),s("span",{staticClass:"c-read c-sent",class:{"c-active":e.sender==t.config.logged_user_id&&0==e.is_read}}),s("span",{staticClass:"c-read c-seen",class:{"c-active":e.sender==t.config.logged_user_id&&1==e.is_read}})])})],2)],1):t._e()},Ht=[];function Lt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function Tt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Lt(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Lt(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var zt={components:{vuescroll:D.a},mixins:[u],data:function(){return{offset:0,more:1,date:null,moment:moment,ops:{vuescroll:{},scrollPanel:{initialScrollY:100,initialScrollX:!1,scrollingX:!1,scrollingY:!0,speed:300,easing:void 0,verticalNativeBarPos:"right"},rail:{},bar:{}}}},computed:Tt({},Object(l["c"])(["base_url","config","guest_id","guest_notifications","guest_messages","user","modal","messageIndex"])),methods:Tt({},Object(l["b"])(["add","update","prepend"]),{getGuestMessages:function(t){var e=this,s=Object(a["a"])({},csrf_name,csrf_token),i=this.toFormData(s);1==t&&(this.offset=0,this.more=1),1==this.more&&this.guest_id>0&&r.a.post(addchat_api+"get_guest_messages/"+this.guest_id+"/"+this.offset,i).then(function(s){if(s.data.status){if(1==t){var a=e.guest_id,i=null;e.guest_notifications.length>0&&e.guest_notifications.forEach(function(t,e){t.g_from==a&&(i=e)}),null!==i&&e.$delete(e.guest_notifications,i),e.add({guest_messages:s.data.messages})}else e.prepend({guest_messages:s.data.messages});e.more=s.data.more,e.offset=s.data.offset}}).catch(function(t){console.log(t)})},unSend:function(t){var e=this,s=Object(a["a"])({},csrf_name,csrf_token),i=this.toFormData(s);r.a.post(addchat_api+"message_unsend/"+t,i).then(function(t){t.data.status?(null!==e.messageIndex&&e.$delete(e.guest_messages,e.messageIndex),e.showNotification("success",t.data.message)):e.showNotification("error",t.data.message),e.add({modal:{status:"",message:null},messageIndex:null})}).catch(function(t){console.log(t)})},handleScroll:function(t,e,s){this.$refs["vs"].scrollBy({dy:200})}}),mounted:function(){var t=this;this.$store.watch(function(t){return t.guest_id},function(){t.getGuestMessages(1)})}},Rt=zt,Bt=Object(b["a"])(Rt,It,Ht,!1,null,null,null),Vt=Bt.exports,Jt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-buddy",class:{"c-expand":t.expand}},[s("span",{staticClass:"c-close",on:{click:function(e){t.expand=!1}}},[t._v("×")]),s("div",{staticClass:"c-buddy-image"},[s("img",{staticClass:"c-image c-online-shadow",attrs:{src:t.imageSource("")}})]),s("div",{staticClass:"c-heading"},[s("p",{staticClass:"c-title animate"},[t._v(t._s(t.guest_buddy.fullname))])])])},Xt=[];function Zt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function Qt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Zt(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Zt(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var Kt={mixins:[u],data:function(){return{guest_buddy:[]}},computed:Qt({},Object(l["c"])(["base_url","guest_id","config"])),methods:Qt({},Object(l["b"])(["add","update"]),{getGuestBuddy:function(){var t=this;this.$store.watch(function(t){return t.guest_id},function(){if(t.guest_id>0){var e,s=(e={},Object(a["a"])(e,csrf_name,csrf_token),Object(a["a"])(e,"guest_id",t.guest_id),e),i=t.toFormData(s);r.a.post(addchat_api+"get_guest_buddy",i).then(function(e){t.guest_buddy=e.data.buddy}).catch(function(t){console.log(t)})}})}}),mounted:function(){this.getGuestBuddy()}},Wt=Kt,te=Object(b["a"])(Wt,Jt,Xt,!1,null,null,null),ee=te.exports,se=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-send"},[s("form",{ref:"form",attrs:{method:"POST",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.validateForm(e)}}},[s("input",{attrs:{type:"hidden",name:"guest_id"},domProps:{value:t.guest_id}}),s("input",{attrs:{type:"hidden",name:t.csrf_name},domProps:{value:t.csrf_token}}),t.guest_typing?s("div",{staticClass:"c-typing-wrapper"},[s("div",{staticClass:"c-typing-text"},[t._v("\n                "+t._s(t.guest_typing_user.fullname?t.guest_typing_user.fullname+" is typing":t.fullName(t.guest_typing_user.email)+" is typing")+"\n            ")]),t._m(0)]):t._e(),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],ref:"message",staticClass:"c-send-textarea c-no-emoji",attrs:{rows:"1",name:"message",placeholder:"Send a message ..."},domProps:{value:t.message},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.triggerSubmit(e)},keydown:function(e){return t.isGuestTyping()},input:function(e){e.target.composing||(t.message=e.target.value)}}}),s("button",{ref:"submit",staticClass:"c-button-round",attrs:{type:"submit"}},[s("i",{staticClass:"c-send-message"})])])])},ae=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-typing"},[s("div",{staticClass:"c-typing-indicator"}),s("div",{staticClass:"c-typing-indicator"}),s("div",{staticClass:"c-typing-indicator"}),s("div",{staticClass:"c-typing-indicator"})])}];function ie(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function ne(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?ie(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ie(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var ce={mixins:[u],data:function(){return{message:""}},components:{},computed:ne({},Object(l["c"])(["base_url","messages","config","guest_id","guest_messages","csrf_name","csrf_token","guest_typing","guest_typing_user"])),methods:ne({},Object(l["b"])(["add","update"]),{triggerSubmit:function(){},resetForm:function(){this.message=null},validateForm:function(t){var e=this;this.$validator.validateAll().then(function(s){if(s)return e.formSubmit(t),!0;e.showNotification("error",e.errors.all().toString())})},serverValidate:function(t){var e=this;this.$validator.validateAll().then(function(s){e.$validator.errors.add(t),e.showNotification("error",e.errors.all().toString()),e.errors.clear()})},formSubmit:function(t){var e=this,s=addchat_api+"send_to_guest",a=new FormData(this.$refs.form),i={onUploadProgress:function(t){console.log("Upload progress: "+Math.round(t.loaded/t.total*100)+"%")}};r.a.post(s,a,i).then(function(t){if(t.data.status)e.resetForm(),e.update({guest_messages:t.data.message});else{[{field:"message",msg:t.data.response}]}}).catch(function(t){t&&console.log(t)})},isGuestTyping:function(){this.config.notification_type>0&&this.$parent.isGuestTyping()}})},oe=ce,re=Object(b["a"])(oe,se,ae,!1,null,null,null),le=re.exports,ue=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-send"},[s("form",{ref:"form",attrs:{method:"POST",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.validateForm(e)}}},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"hidden",name:"guest_id"},domProps:{value:this.$cookie.get("guest")}}),s("input",{attrs:{type:"hidden",name:t.csrf_name},domProps:{value:t.csrf_token}}),t.guest_typing?s("div",{staticClass:"c-typing-wrapper"},[s("div",{staticClass:"c-typing-text"},[t._v("\n                "+t._s(t.typing_user.fullname?t.typing_user.fullname+" is typing":t.fullName(t.typing_user.email)+" is typing")+"\n                "+t._s(t.guest_typing_user.fullname?t.guest_typing_user.fullname+" is typing":t.fullName(t.guest_typing_user.email)+" is typing")+"\n            ")]),t._m(0)]):t._e(),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],ref:"message",staticClass:"c-send-textarea c-no-emoji",attrs:{rows:"1",name:"message",placeholder:"Send a message ..."},domProps:{value:t.message},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.triggerSubmit(e)},keydown:function(e){return t.isGuestTyping()},input:function(e){e.target.composing||(t.message=e.target.value)}}}),s("button",{ref:"submit",staticClass:"c-button-round",attrs:{type:"submit"}},[s("i",{staticClass:"c-send-message"})])])])},de=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-typing"},[s("div",{staticClass:"c-typing-indicator"}),s("div",{staticClass:"c-typing-indicator"}),s("div",{staticClass:"c-typing-indicator"}),s("div",{staticClass:"c-typing-indicator"})])}];function me(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function fe(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?me(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):me(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var pe={mixins:[u],data:function(){return{message:""}},components:{},computed:fe({},Object(l["c"])(["base_url","messages","config","guest_id","guest_messages","csrf_name","csrf_token","guest_typing","guest_typing_user"])),methods:fe({},Object(l["b"])(["add","update"]),{triggerSubmit:function(){},resetForm:function(){this.message=null},validateForm:function(t){var e=this;this.$validator.validateAll().then(function(s){if(s)return e.formSubmit(t),!0;e.showNotification("error",e.errors.all().toString())})},serverValidate:function(t){var e=this;this.$validator.validateAll().then(function(s){e.$validator.errors.add(t),e.showNotification("error",e.errors.all().toString()),e.errors.clear()})},formSubmit:function(t){var e=this,s=addchat_api+"guest_send_message",a=new FormData(this.$refs.form),i={onUploadProgress:function(t){console.log("Upload progress: "+Math.round(t.loaded/t.total*100)+"%")}};r.a.post(s,a,i).then(function(t){if(t.data.status)e.resetForm(),e.update({guest_messages:t.data.message});else{[{field:"message",msg:t.data.response}]}}).catch(function(t){t&&console.log(t)})},isGuestTyping:function(){this.config.notification_type>0&&this.$parent.isGuestTyping()}}),mounted:function(){}},ge=pe,_e=Object(b["a"])(ge,ue,de,!1,null,null,null),ve=_e.exports,he=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ca-dashboard ca-active c-animate"},[s("div",{staticClass:"ca-widgets"},[s("div",{staticClass:"ca-widget"},[s("div",{staticClass:"ca-widget-users"},[t._v(" Users")]),s("div",{staticClass:"ca-widget-count"},[t._v(t._s(t.countUser))])]),t._m(0),t._m(1),t._m(2)]),t._m(3)])},be=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ca-widget"},[s("div",{staticClass:"ca-widget-conversations"},[t._v(" Conversations")]),s("div",{staticClass:"ca-widget-count"},[t._v("1,500,00")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ca-widget"},[s("div",{staticClass:"ca-widget-br"},[t._v(" Blocked & Reported")]),s("div",{staticClass:"ca-widget-count"},[t._v("139")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ca-widget"},[s("div",{staticClass:"ca-widget-cg"},[t._v(" Chat Groups")]),s("div",{staticClass:"ca-widget-count"},[t._v("150")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ca-card"},[s("div",{staticClass:"main-header__heading"},[t._v("Hello User")]),s("div",{staticClass:"main-header__updates"},[t._v("Recent Items")])])}],ye={props:["base_url"],mixins:[u],data:function(){return{countUser:Number}},mounted:function(){}},Ce=ye,Oe=Object(b["a"])(Ce,he,be,!1,null,null,null),je=Oe.exports,ke=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ca-conversations ca-active c-animate"},[s("div",{staticClass:"ca-card"},[s("h3",{staticClass:"ca-card-header"},[t._v("Conversations")]),s("div",{staticClass:"ca-table"},[s("div",{staticClass:"c-chatbox",class:{"c-active":t.active}},[s("span",{staticClass:"c-close",on:{click:function(e){t.active=!1,t.offset2=0,t.more2=1,t.conversations=[]}}},[t._v("×")]),s("div",{staticClass:"c-buddy"},[s("div",{staticClass:"c-heading"},[s("p",{staticClass:"c-title animate"},[t._v(t._s(t.sender_name)+" "),s("i",{staticClass:"fas fa-arrow-circle-right"}),t._v(" "+t._s(t.receiver_name)+" ")])])]),s("div",{staticClass:"c-messages c-animate"},[s("vuescroll",[t.more2>0?s("span",{staticClass:"c-more",on:{click:function(e){return t.get_conversations(t.sender_id,t.receiver_id,t.sender_name,t.receiver_name)}}},[t._v("Load More")]):t._e(),t._l(t.conversations,function(e,a){return s("div",{key:a,staticClass:"c-message c-animate",class:{"c-reply":e.m_from==t.receiver_id}},[0==a||a>0&&t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD")!=t.moment(t.conversations[a-1].dt_updated,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD")?s("label",{staticClass:"c-daystamp c-animate"},[t._v("\n                                "+t._s(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("MMMM Do YYYY"))+"\n                            ")]):t._e(),s("div",{staticClass:"c-quote",class:[e.m_reply_id>0?"c-active":"",e.m_from==t.sender_id?"c-you":"c-sender"]},[s("span",{staticClass:"c-subtitle"},[t._v(t._s(e.reply_user_id==t.sender_id?t.sender_name:t.receiver_name))]),s("p",{directives:[{name:"linkified",rawName:"v-linkified"}],staticClass:"c-text",domProps:{innerHTML:t._s(t.findUrl(e.quote_message))}})]),s("div",{staticClass:"c-bubble-wrapper"},[s("div",{directives:[{name:"linkified",rawName:"v-linkified"}],staticClass:"c-bubble c-animate",domProps:{innerHTML:t._s(t.findUrl(e.message))}})]),s("span",{staticClass:"c-timestamp c-animate"},[t._v(t._s(t.timeSince(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss"))))]),e.m_to_delete>0&&e.m_from_delete>0?s("span",{staticClass:"c-deleted"},[t._v("Deleted")]):t._e(),e.attachment?s("img",{staticClass:"c-image-attachment c-animate",attrs:{src:t.imageAttachment(e.attachment)}}):t._e()])})],2)],1)]),t._m(0),s("div",{staticClass:"ca-table-body"},t._l(t.chat_betweens,function(e,a){return s("div",{key:a,staticClass:"ca-table-row"},[s("div",{staticClass:"ca-table-cell"},[t._v(t._s(e.m_from_username?e.m_from_username:t.fullName(e.m_from_email))+" "),s("i",{staticClass:"fas fa-arrow-circle-right"}),t._v(" \n                        "+t._s(e.m_to_username?e.m_to_username:t.fullName(e.m_to_email))+"\n                    ")]),s("div",{staticClass:"ca-table-cell"},[t._v(t._s(e.message)+" ")]),s("div",{staticClass:"ca-table-cell"},[t._v(t._s(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("LLLL")))]),s("div",{staticClass:"ca-table-cell"},[s("button",{staticClass:"c-button c-btn-primary c-btn-sm",attrs:{type:"button"},on:{click:function(s){t.get_conversations(e.m_from,e.m_to,e.m_from_username?e.m_from_username:t.fullName(e.m_from_email),e.m_to_username?e.m_to_username:t.fullName(e.m_to_email))}}},[t._v("\n                            view\n                        ")])])])}),0),s("div",{staticClass:"ca-table-header"},[t.more>0?s("div",{staticClass:"ca-table-header-cell ca-load-more",on:{click:function(e){return t.chatBetween()}}},[t._v("Load More")]):t._e()])])])])},we=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ca-table-header"},[s("div",{staticClass:"ca-table-header-cell"},[t._v("Chat Between")]),s("div",{staticClass:"ca-table-header-cell"},[t._v("Last Message")]),s("div",{staticClass:"ca-table-header-cell"},[t._v("Date")]),s("div",{staticClass:"ca-table-header-cell"},[t._v("View")])])}];function Pe(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function xe(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Pe(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Pe(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var De={components:{vuescroll:D.a},props:["base_url"],mixins:[u],computed:xe({},Object(l["c"])(["config"])),data:function(){return{chat_betweens:Array(0),conversations:Array(0),offset:0,more:1,active:!1,sender_name:null,receiver_name:null,sender_id:null,receiver_id:null,offset2:0,more2:1,moment:moment}},methods:xe({},Object(l["b"])(["add"]),{chatBetween:function(){var t=this,e=Object(a["a"])({},csrf_name,csrf_token),s=this.toFormData(e);r.a.post(addchat_api+"a_chat_between/"+this.offset,s).then(function(e){if(e.data.status){var s;if(t.chat_betweens.length>0)(s=t.chat_betweens).push.apply(s,Object(k["a"])(e.data.chat_betweens));else t.chat_betweens=e.data.chat_betweens;t.more=e.data.more,t.offset=e.data.offset}}).catch(function(t){console.log(t)})},get_conversations:function(t,e,s,i){var n=this;this.active=!0,this.sender_name=s,this.receiver_name=i,this.sender_id=t,this.receiver_id=e;var c=Object(a["a"])({},csrf_name,csrf_token),o=this.toFormData(c);r.a.post(addchat_api+"a_get_conversations/"+t+"/"+e+"/"+this.offset2,o).then(function(t){if(t.data.status){var e;if(n.conversations.length>0)(e=n.conversations).unshift.apply(e,Object(k["a"])(t.data.conversations));else n.conversations=t.data.conversations;n.more2=t.data.more,n.offset2=t.data.offset}}).catch(function(t){console.log(t)})}}),mounted:function(){this.chatBetween()}},Se=De,Ne=Object(b["a"])(Se,ke,we,!1,null,null,null),Me=Ne.exports,Ye=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ca-blocked ca-active c-animate"},[s("div",{staticClass:"ca-card"},[s("h3",{staticClass:"ca-card-header"},[t._v("Blocked & Reported")]),s("div",{staticClass:"ca-table"},[t._m(0),s("div",{staticClass:"ca-table-body"},t._l(t.blocked_users,function(e,a){return s("div",{key:a,staticClass:"ca-table-row"},[s("div",{staticClass:"ca-table-cell"},[t._v(t._s(e.blocked_users?e.blocked_users:t.fullName(e.blocked_users_email)))]),s("div",{staticClass:"ca-table-cell"},[t._v(t._s(e.blocked_by_users?e.blocked_by_users:t.fullName(e.blocked_by_users_email)))]),s("div",{staticClass:"ca-table-cell"},[t._v(t._s(e.is_reported>0?"YES":"NO"))]),s("div",{staticClass:"ca-table-cell"},[t._v(t._s(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("LLLL")))])])}),0),s("div",{staticClass:"ca-table-header"},[t.more?s("div",{staticClass:"ca-table-header-cell ca-load-more",on:{click:function(e){return t.get_blocked_users()}}},[t._v("Load More")]):t._e()])])])])},Ee=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ca-table-header"},[s("div",{staticClass:"ca-table-header-cell"},[t._v("Blocked")]),s("div",{staticClass:"ca-table-header-cell"},[t._v("Blocked By")]),s("div",{staticClass:"ca-table-header-cell"},[t._v("Reported")]),s("div",{staticClass:"ca-table-header-cell"},[t._v("Date")])])}],$e={mixins:[u],props:["base_url"],data:function(){return{blocked_users:Array(0),offset:0,more:1,moment:moment}},methods:{get_blocked_users:function(){var t=this,e=Object(a["a"])({},csrf_name,csrf_token),s=this.toFormData(e);r.a.post(addchat_api+"get_blocked_users/"+this.offset,s).then(function(e){if(e.data.status){var s;if(t.blocked_users.length>0)(s=t.blocked_users).push.apply(s,Object(k["a"])(e.data.blocked_users));else t.blocked_users=e.data.blocked_users;t.more=e.data.more,t.offset=e.data.offset}}).catch(function(t){console.log(t)})}},mounted:function(){this.get_blocked_users()}},Ge=$e,Ue=Object(b["a"])(Ge,Ye,Ee,!1,null,null,null),Fe=Ue.exports,qe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ca-chatgroups ca-active c-animate"},[s("div",{staticClass:"ca-card"},[s("h3",{staticClass:"ca-card-header"},[t._v("Chat Groups")]),s("div",{staticClass:"ca-table"},[t._m(0),s("div",{staticClass:"ca-table-body"},t._l(t.groups,function(e,a){return s("div",{key:a,staticClass:"ca-table-row",on:{click:function(s){return t.editChatGroup(e.id)}}},[s("div",{staticClass:"ca-table-cell"},[s("p",[t._v(t._s(e.name))])]),s("div",{staticClass:"ca-table-cell"},["undefined"===typeof t.chat_groups[e.id]?s("span",[t._v("N/A")]):t._e(),t._l(t.chat_groups[e.id],function(e){return s("span",t._l(t.groups,function(a){return a.id==e?s("span",[t._v(" "+t._s(a.name)+" |")]):t._e()}),0)})],2),s("div",{staticClass:"ca-table-cell"},[s("button",{staticClass:"c-button c-btn-primary c-btn-sm",attrs:{type:"button"},on:{click:function(s){return t.editChatGroup(e.id)}}},[t._v("Permissions")])])])}),0)])]),t.show_modal?s("div",{staticClass:"c-modal c-admin c-animate c-active",attrs:{tabindex:"-1"}},[s("div",{staticClass:"c-modal-dialog c-modal-dialog-centered"},[s("div",{staticClass:"c-modal-content"},[s("div",{staticClass:"c-modal-body"},[s("div",{staticClass:"c-card"},[s("div",{staticClass:"c-card-header"},[s("h6",{staticClass:"c-card-title"},[t._v("Admin: Can chat with")]),s("span",{staticClass:"c-close",on:{click:function(e){t.show_modal=!1}}},[t._v("×")])]),s("div",{staticClass:"c-card-body"},[s("form",{ref:"form",attrs:{method:"POST",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.validateForm(e)}}},[s("input",{attrs:{type:"hidden",name:t.csrf_name},domProps:{value:t.csrf_token}}),s("div",{staticClass:"c-checkbox-group c-m-1"},t._l(t.groups,function(e,a){return s("div",{key:a,staticClass:"c-checkbox"},[s("input",{attrs:{type:"hidden",name:"group_id"},domProps:{value:t.groupId}}),s("input",{staticClass:"c-checkbox-input",attrs:{type:"checkbox",id:"ug-"+a,name:"gc_id[]"},domProps:{value:e.id,checked:t.chat_groups[t.groupId]?t.chat_groups[t.groupId].includes(e.id):""}}),s("label",{staticClass:"c-checkbox-label",attrs:{for:"ug-"+a}},[s("span",{staticClass:"c-checkbox-button"}),t._v(" "+t._s(e.name)+"\n                                        ")])])}),0),s("button",{staticClass:"c-button c-btn-primary c-btn-block c-mt-3",attrs:{type:"submit"}},[t._v("Save Permissions")])])])])])])])]):t._e()])},Ae=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ca-table-header"},[s("div",{staticClass:"ca-table-header-cell"},[t._v("Group")]),s("div",{staticClass:"ca-table-header-cell"},[t._v("Can Chat With")]),s("div",{staticClass:"ca-table-header-cell"},[t._v("Action")])])}];function Ie(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function He(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ie(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ie(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var Le={mixins:[u],props:["base_url"],data:function(){return{groups:Array,show_modal:!1,groupId:null,chat_groups:Array}},computed:He({},Object(l["c"])(["config","csrf_name","csrf_token"])),methods:He({},Object(l["b"])(["add"]),{editChatGroup:function(t){this.show_modal=!0,this.groupId=t},getChatGroups:function(){var t=this,e=Object(a["a"])({},csrf_name,csrf_token),s=this.toFormData(e);r.a.post(addchat_api+"a_get_groups",s).then(function(e){e.data.status&&(t.groups=e.data.groups,t.chat_groups=e.data.chatgroups)}).catch(function(t){console.log(t)})},validateForm:function(t){var e=this;this.$validator.validateAll().then(function(s){if(s)return e.formSubmit(t),!0;e.showNotification("error",e.errors.all().toString())})},serverValidate:function(t){var e=this;this.$validator.validateAll().then(function(s){e.$validator.errors.add(t),e.showNotification("error",e.errors.all().toString()),e.errors.clear()})},formSubmit:function(t){var e=this,s=addchat_api+"save_groupchat",a=new FormData(this.$refs.form),i={onUploadProgress:function(t){console.log("Upload progress: "+Math.round(t.loaded/t.total*100)+"%")}};r.a.post(s,a,i).then(function(t){if(e.show_modal=!1,t.data.status)e.getChatGroups(),e.showNotification("success","Saved Permmission Successfully");else{var s=[];s=[{field:"message",msg:t.data.response}],e.serverValidate(s)}}).catch(function(t){t&&console.log(t)})}}),mounted:function(){this.getChatGroups()}},Te=Le,ze=(s("786a"),Object(b["a"])(Te,qe,Ae,!1,null,"9af4ab2c",null)),Re=ze.exports,Be=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ca-settings ca-active c-animate"},[s("div",{staticClass:"ca-card"},[s("h3",{staticClass:"ca-card-header"},[t._v("Settings")]),s("div",{staticClass:"ca-form"},[s("vuescroll",[s("div",{staticClass:"ca-form-content"},[s("form",{ref:"form",attrs:{method:"POST",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.validateForm(e)}}},[s("input",{attrs:{type:"hidden",name:t.csrf_name},domProps:{value:t.csrf_token}}),s("p",{staticClass:"c-title"},[t._v("GENERAL")]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("Site Name")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"text",name:"site_name",placeholder:"e.g /xyz.com/"},domProps:{value:t.settings.site_name}})]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("Site Logo")]),s("img",{staticClass:"c-image-big no-radius",attrs:{src:t.imageSrc?t.imageSrc:t.imageSource(t.settings.site_logo)}}),s("div",{staticClass:"c-edit c-animate"},[s("input",{directives:[{name:"validate",rawName:"v-validate"}],ref:"image",attrs:{type:"file",id:"image",name:"image",accept:".png, .jpg, .jpeg","data-vv-rules":"image|size:10485760"},on:{change:function(e){return t.onFileChange(e,1)}}})])]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("Chat Icon")]),s("img",{staticClass:"c-image-big no-radius",attrs:{src:t.imageSrc1?t.imageSrc1:t.imageSource(t.settings.chat_icon)}}),s("div",{staticClass:"c-edit c-animate"},[s("input",{directives:[{name:"validate",rawName:"v-validate"}],ref:"chat_icon",attrs:{type:"file",id:"chat_icon",name:"chat_icon",accept:".png, .jpg, .jpeg","data-vv-rules":"image|size:10485760"},on:{change:t.onFileChange}})])]),s("p",{staticClass:"c-title"},[t._v("WIDGET CONFIGS")]),s("label",{staticClass:"c-label"},[t._v("Logged-in User Id Session Key (session key name)")]),s("div",{staticClass:"c-input-group c-input-group-prepend"},[s("div",{staticClass:"c-prepend"},[s("div",{staticClass:"c-prepend-text"},[t._v('$_SESSION["')])]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input c-prepend-input",attrs:{type:"text",name:"admin_user_id",placeholder:"e.g user_id"},domProps:{value:t.settings.session_user_id}}),s("div",{staticClass:"c-prepend"},[s("div",{staticClass:"c-prepend-text"},[t._v('"]')])])]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("Admin User Id (value)")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"number",name:"admin_user_id",placeholder:"e.g 1"},domProps:{value:t.settings.admin_user_id}})]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("Pagination Limit")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"number",name:"pagination_limit",placeholder:"e.g 10"},domProps:{value:t.settings.pagination_limit}})]),s("label",{staticClass:"c-label"},[t._v("Upload Path")]),s("div",{staticClass:"c-input-group c-input-group-prepend"},[s("div",{staticClass:"c-prepend"},[s("div",{staticClass:"c-prepend-text"},[t._v(t._s(t.base_url))])]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input c-prepend-input",attrs:{type:"text",name:"img_upload_path",placeholder:"e.g upload"},domProps:{value:t.settings.img_upld_pth}})]),s("label",{staticClass:"c-label"},[t._v("Assets Path")]),s("div",{staticClass:"c-input-group c-input-group-prepend"},[s("div",{staticClass:"c-prepend"},[s("div",{staticClass:"c-prepend-text"},[t._v(t._s(t.base_url))])]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input c-prepend-input",attrs:{type:"text",name:"assets_path",placeholder:"e.g assets"},domProps:{value:t.settings.assets_path}})]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.theme_colour,expression:"theme_colour"}],attrs:{type:"hidden",value:"blue",name:"theme_colour"},domProps:{value:t.theme_colour},on:{input:function(e){e.target.composing||(t.theme_colour=e.target.value)}}}),s("p",{staticClass:"c-title"},[t._v("USERS TABLE")]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("Users Table Name")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"text",name:"users_table",placeholder:"users table name"},domProps:{value:t.settings.users_table}})]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("User Id (column name)")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"text",name:"users_id",placeholder:"users id"},domProps:{value:t.settings.users_col_id}})]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("User Email (column name)")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"text",name:"users_email",placeholder:"users email"},domProps:{value:t.settings.users_col_email}})]),s("p",{staticClass:"c-title"},[t._v("USER GROUPS TABLE")]),s("div",{staticClass:"c-checkbox-group"},[s("label",{staticClass:"c-label"},[t._v("Groups")]),s("div",{staticClass:"c-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.group,expression:"group"}],staticClass:"c-checkbox-input",attrs:{type:"checkbox",name:"is_groups",placeholder:"0 for off and 1 for on group",value:"1",id:"on_off"},domProps:{checked:Array.isArray(t.group)?t._i(t.group,"1")>-1:t.group},on:{change:function(e){var s=t.group,a=e.target,i=!!a.checked;if(Array.isArray(s)){var n="1",c=t._i(s,n);a.checked?c<0&&(t.group=s.concat([n])):c>-1&&(t.group=s.slice(0,c).concat(s.slice(c+1)))}else t.group=i}}}),s("label",{staticClass:"c-checkbox-label",attrs:{for:"on_off"}},[s("span",{staticClass:"c-checkbox-button"}),t._v(" On/Off\n                                ")])])]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("Groups Table Name")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"text",name:"groups_table",placeholder:"group table name",readonly:!t.group&&t.readonly},domProps:{value:t.settings.groups_table}})]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("Group Id (column name)")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"text",name:"groups_id",placeholder:"group id",readonly:!t.group&&t.readonly},domProps:{value:t.settings.groups_col_id}})]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("Group Name (column name)")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"text",name:"groups_name",placeholder:"group name",readonly:!t.group&&t.readonly},domProps:{value:t.settings.groups_col_name}})]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("Pivot Table Name (Users & Groups Pivot Table)")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"text",name:"ug_table_name",placeholder:"users name",readonly:!t.group&&t.readonly},domProps:{value:t.settings.ug_table_name}})]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("Pivot Table User Id (column name)")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"text",name:"ug_user_id",placeholder:"users id column name",readonly:!t.group&&t.readonly},domProps:{value:t.settings.ug_col_user_id}})]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("Pivot Table Group Id (column name)")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{type:"text",name:"ug_group_id",placeholder:"users group id column name",readonly:!t.group&&t.readonly},domProps:{value:t.settings.ug_col_group_id}})]),s("p",{staticClass:"c-title"},[t._v("GUEST MODE")]),s("p",{staticClass:"c-title"},[t._v("REALTIME NOTIFICATIONS")]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("Notification Type")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.notification_type,expression:"notification_type"}],staticClass:"c-input",attrs:{name:"notification_type"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.notification_type=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"0"}},[t._v("Internal Notification")]),s("option",{attrs:{value:"1"}},[t._v("Pusher Notification")])])]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("Pusher App Id")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{readonly:!(t.notification_type>0),type:"text",name:"pusher_app_id",placeholder:"Pusher app id"},domProps:{value:t.settings.pusher_app_id}})]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("Pusher Key")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{readonly:!(t.notification_type>0),type:"text",name:"pusher_key",placeholder:"Pusher key"},domProps:{value:t.settings.pusher_key}})]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("Pusher Secret")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{readonly:!(t.notification_type>0),type:"text",name:"pusher_secret",placeholder:"Pusher Secret"},domProps:{value:t.settings.pusher_secret}})]),s("div",{staticClass:"c-input-group"},[s("label",{staticClass:"c-label"},[t._v("Pusher Cluster")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"c-input",attrs:{readonly:!(t.notification_type>0),type:"text",name:"pusher_cluster",placeholder:"Pusher Secret"},domProps:{value:t.settings.pusher_cluster}})]),s("p",{staticClass:"c-title"},[t._v("INCLUDE/EXCLUDE URLs")]),s("p",{staticClass:"c-subtitle"},[t._v("Show/Hide AddChat widget on specific URLs")]),s("div",{staticClass:"c-radio-group"},[s("label",{staticClass:"c-label"},[t._v("Enable Include/Exclude URL Permissions")]),s("p",{staticClass:"ca-form-help"},[s("strong",[t._v("*You can use either Include URL or Exclude URL at one time.")])]),s("div",{staticClass:"c-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.chose_url,expression:"chose_url"}],staticClass:"c-radio-input",attrs:{type:"radio",name:"include_or_exclude",id:"off",value:"0"},domProps:{checked:t._q(t.chose_url,"0")},on:{change:function(e){t.chose_url="0"}}}),s("label",{staticClass:"c-radio-label",attrs:{for:"off"}},[s("span",{staticClass:"c-radio-button"}),t._v(" Off\n                                ")])]),s("br"),s("div",{staticClass:"c-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.chose_url,expression:"chose_url"}],staticClass:"c-radio-input",attrs:{type:"radio",name:"include_or_exclude",id:"include_url",value:"1"},domProps:{checked:t._q(t.chose_url,"1")},on:{change:function(e){t.chose_url="1"}}}),s("label",{staticClass:"c-radio-label",attrs:{for:"include_url"}},[s("span",{staticClass:"c-radio-button"}),t._v(" Include URLs\n                                ")])]),s("br"),s("div",{staticClass:"c-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.chose_url,expression:"chose_url"}],staticClass:"c-radio-input",attrs:{type:"radio",name:"include_or_exclude",id:"exclude_url",value:"2"},domProps:{checked:t._q(t.chose_url,"2")},on:{change:function(e){t.chose_url="2"}}}),s("label",{staticClass:"c-radio-label",attrs:{for:"exclude_url"}},[s("span",{staticClass:"c-radio-button"}),t._v(" Exclude URLs\n                                ")])])]),1==t.chose_url?s("div",[s("div",{staticClass:"c-mb-10"},[s("label",{staticClass:"c-label"},[t._v("Include URL")]),s("button",{staticClass:"c-button c-btn-neutral",attrs:{type:"button"},on:{click:function(e){0!=t.chose_url&&2!=t.chose_url||1==t.chose_url?t.addUrl("i"):t.readonly}}},[t._v("Add More URL +")])]),t._l(t.settings.include_url,function(e,a){return s("div",{key:a,staticClass:"c-input-group ca-add-more-row"},[s("div",{staticClass:"c-fl-left c-input-group-prepend"},[s("div",{staticClass:"c-prepend"},[s("div",{staticClass:"c-prepend-text"},[t._v(t._s(t.base_url))])]),s("input",{staticClass:"c-input c-prepend-input",attrs:{type:"text",name:"include_url[]",placeholder:"e.g /profile"},domProps:{value:e}})]),s("div",{staticClass:"c-fl-right"},[s("button",{staticClass:"c-button c-btn-danger c-btn-sm c-mt-10",attrs:{type:"button"},on:{click:function(e){return t.$delete(t.settings.include_url,a)}}},[s("i",{staticClass:"c-delete"})])])])})],2):t._e(),2==t.chose_url?s("div",[s("div",{staticClass:"c-mb-10"},[s("label",{staticClass:"c-label"},[t._v("Exclude URL")]),s("button",{staticClass:"c-button c-btn-neutral",attrs:{type:"button"},on:{click:function(e){(0!=t.chose_url&&1!=t.chose_url||2==t.chose_url)&&t.addUrl("e")}}},[t._v("Add More URL +")])]),t._l(t.settings.exclude_url,function(e,a){return s("div",{key:a,staticClass:"c-input-group ca-add-more-row"},[s("div",{staticClass:"c-fl-left c-input-group-prepend"},[s("div",{staticClass:"c-prepend"},[s("div",{staticClass:"c-prepend-text"},[t._v(t._s(t.base_url))])]),s("input",{staticClass:"c-input c-prepend-input",attrs:{type:"text",name:"exclude_url[]",placeholder:"e.g /about"},domProps:{value:e}})]),s("div",{staticClass:"c-fl-right"},[s("button",{staticClass:"c-button c-btn-danger c-btn-sm c-mt-10",attrs:{type:"button"},on:{click:function(e){return t.$delete(t.settings.exclude_url,a)}}},[s("i",{staticClass:"c-delete"})])])])})],2):t._e(),s("button",{staticClass:"c-button c-btn-primary c-btn-block ca-settings-btn",attrs:{type:"submit"}},[t._v("Save Settings")])])])])],1)])])},Ve=[];function Je(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function Xe(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Je(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Je(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var Ze={components:{vuescroll:D.a},mixins:[u],props:["base_url"],data:function(){return{settings:Array(),include_url:[1],exclude_url:[1],chose_url:Number(0),readonly:!0,group:Number(0),theme_colour:null,imageSrc:null,imageSrc1:null,notification_type:0}},computed:Xe({},Object(l["c"])(["config","csrf_name","csrf_token"])),methods:Xe({},Object(l["b"])(["add"]),{getSettings:function(){var t=this,e=Object(a["a"])({},csrf_name,csrf_token),s=this.toFormData(e);r.a.post(addchat_api+"get_config",s).then(function(e){t.settings=e.data.config,t.chose_url=t.settings.include_or_exclude,t.group=t.settings.is_groups,t.add({config:e.data.config}),t.theme_colour=t.settings.theme_colour?t.settings.theme_colour:null,t.notification_type=t.settings.notification_type}).catch(function(t){console.log(t)})},addUrl:function(t){"i"==t?null==this.settings.include_url?this.settings.include_url=[""]:this.settings.include_url.push(""):(console.log("this.settings.exclude_url---\x3e"),console.log(this.settings.exclude_url),null==this.settings.exclude_url?this.settings.exclude_url=[""]:this.settings.exclude_url.push(""))},validateForm:function(t){var e=this;this.$validator.validateAll().then(function(s){if(s)return e.formSubmit(t),!0;e.showNotification("error",e.errors.all().toString())})},serverValidate:function(t){var e=this;this.$validator.validateAll().then(function(s){e.$validator.errors.add(t),e.showNotification("error",e.errors.all().toString()),e.errors.clear()})},onFileChange:function(t,e){var s=t.target.files||t.dataTransfer.files;return!!s.length&&(-1==s[0].type.indexOf("image")?(this.showNotification("error","Upload only image!"),!1):s[0].size>10485760?(this.showNotification("error","Upload only upto 10 MB!"),!1):void this.createImage(s[0],e))},createImage:function(t,e){var s=new FileReader,a=this;s.onload=function(t){1==e?(a.image=t.target.result,a.imageSrc=t.target.result):(a.chat_icon=t.target.result,a.imageSrc1=t.target.result)},s.readAsDataURL(t)},formSubmit:function(t){var e=this,s=addchat_api+"save_settings",a=new FormData(this.$refs.form),i={onUploadProgress:function(t){console.log("Upload progress: "+Math.round(t.loaded/t.total*100)+"%")}};r.a.post(s,a,i).then(function(t){if(t.data.status)e.showNotification("success","Saved settings successfully"),e.getSettings();else{var s=[];s=[{field:"message",msg:t.data.response}],e.serverValidate(s)}}).catch(function(t){t&&console.log(t)})}}),mounted:function(){this.getSettings()}},Qe=Ze,Ke=Object(b["a"])(Qe,Be,Ve,!1,null,null,null),We=Ke.exports,ts=s("782e"),es=s.n(ts);function ss(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function as(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?ss(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ss(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var is,ns,cs={mixins:[u],data:function(){return{}},components:{},computed:as({},Object(l["c"])(["base_url","buddy","buddy_id","messages","config","csrf_name","csrf_token","user","typing","typing_user","notifications"])),methods:as({},Object(l["b"])(["add","update"]),{pusher_init:function(){var t=this,e=this.csrf_name;es.a.logToConsole=!0;var s=new es.a(t.config.pusher_key,{cluster:t.config.pusher_cluster,authEndpoint:addchat_api+"auth",auth:{headers:{"X-CSRF-Token":t.csrf_token},params:Object(a["a"])({},e,t.csrf_token)},encrypted:!0});return s},isTyping:function(){if(this.config.notification_type>0&&this.buddy_id>0){var t,e=(t={},Object(a["a"])(t,csrf_name,csrf_token),Object(a["a"])(t,"buddy_id",this.buddy_id),Object(a["a"])(t,"typing_user",JSON.stringify(this.user)),t),s=this.toFormData(e);r.a.post(addchat_api+"is_typing",s).then(function(t){})}},messageSendEvent:function(){var t=this,e=this.user.id,s=(this.csrf_name,this.pusher_init()),a=s.subscribe("private-message."+e);a.bind("message-send",function(e){e.message.status&&(t.buddy_id>0&&(Object.keys(t.messages).length>0?t.update({messages:e.message.message}):t.add({messages:e.message.message})),t.add({notifications:e.notification}),new Audio(base_url+t.config.assets_path+"/addchat/sound/notification.mp3").play(),t.buddy_id>0&&(t.removeNotifications(),t.is_read()))})},removeNotifications:function(){var t=this;if(this.buddy_id>0){var e,s=(e={},Object(a["a"])(e,csrf_name,csrf_token),Object(a["a"])(e,"buddy_id",this.buddy_id),e),i=this.toFormData(s);r.a.post(addchat_api+"remove_notifications",i).then(function(e){t.add({notifications:e.data.notifications})})}},typingEvent:function(){var t=this,e=this.user.id,s=this.pusher_init(),a=s.subscribe("private-typing."+e);a.bind("is-typing",function(e){t.add({typing:!0,typing_user:e.typing_user}),setTimeout(function(){t.add({typing:!1})},900)})},isReadEvent:function(){var t=this,e=this.user.id,s=this.pusher_init(),a=s.subscribe("private-read."+e);a.bind("is-read",function(e){e.data.status&&(t.buddy_id>0&&Object.keys(t.messages).length>0&&t.messages.forEach(function(t,e){0==t.is_read&&(t.is_read=1)}),t.add({messages:t.messages}))})},is_read:function(){if(this.buddy_id>0){var t,e=(t={},Object(a["a"])(t,csrf_name,csrf_token),Object(a["a"])(t,"buddy_id",this.buddy_id),t),s=this.toFormData(e);r.a.post(addchat_api+"is_read",s).then(function(t){})}},getUpdates:function(){var t,e=this,s=(t={},Object(a["a"])(t,csrf_name,csrf_token),Object(a["a"])(t,"notification",JSON.stringify(this.notifications)),t),i=this.toFormData(s);r.a.post(addchat_api+"get_updates",i).then(function(t){t.data.status&&(e.add({notifications:t.data.notification}),new Audio(base_url+e.config.assets_path+"/addchat/sound/notification.mp3").play(),e.getLatestMessage())}).catch(function(t){console.log(t)})}}),mounted:function(){this.getUpdates(),this.messageSendEvent(),this.typingEvent(),this.isReadEvent()},watch:{buddy_id:function(){this.is_read(),this.removeNotifications()}}},os=cs,rs=Object(b["a"])(os,is,ns,!1,null,null,null),ls=rs.exports;function us(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function ds(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?us(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):us(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var ms,fs,ps={mixins:[u],data:function(){return{}},components:{},computed:ds({},Object(l["c"])(["base_url","buddy","guest_id","guest","guest_messages","config","csrf_name","csrf_token","user","guest_typing","guest_typing_user","guest_notifications","close"])),methods:ds({},Object(l["b"])(["add","update","addMessages"]),{pusher_init:function(){var t,e=this,s=this.csrf_name;es.a.logToConsole=!0;var i=new es.a(e.config.pusher_key,{cluster:e.config.pusher_cluster,authEndpoint:addchat_api+"auth",auth:{headers:{"X-CSRF-Token":e.csrf_token},params:(t={},Object(a["a"])(t,s,e.csrf_token),Object(a["a"])(t,"guest_id",e.guest_id),t)},encrypted:!0});return i},isGuestTyping:function(){if(this.config.notification_type>0&&this.guest_id>0){var t,e=(t={},Object(a["a"])(t,csrf_name,csrf_token),Object(a["a"])(t,"guest_id",this.guest_id),Object(a["a"])(t,"guest_typing_user",Object.keys(this.user).length>0?JSON.stringify(this.user):JSON.stringify(this.guest)),t),s=this.toFormData(e);r.a.post(addchat_api+"is_typing_guest",s).then(function(t){})}},messageGuestSendEvent:function(){var t=this,e=Object.keys(this.user).length>0?this.user.id:this.guest_id,s=(this.csrf_name,this.pusher_init()),a=s.subscribe("private-guest-message.g_"+e);a.bind("guest-message-send",function(e){s.connection;e.status&&(t.guest_id>0&&t.update({guest_messages:e.guest_messages}),t.add({guest_notifications:e.guest_notifications}),new Audio(base_url+t.config.assets_path+"/addchat/sound/notification.mp3").play(),t.guest_id>0&&0==t.close&&(t.removeGuestNotifications(),t.is_read_guest()))})},removeGuestNotifications:function(){var t=this;if(this.guest_id>0&&0==this.close){var e,s=(e={},Object(a["a"])(e,csrf_name,csrf_token),Object(a["a"])(e,"guest_id",this.guest_id),e),i=this.toFormData(s);r.a.post(addchat_api+"remove_guest_notifications",i).then(function(e){t.add({guest_notifications:e.data.guest_notifications})})}},typingGuestEvent:function(){var t=this,e=Object.keys(this.user).length>0?this.user.id:this.guest_id,s=this.pusher_init(),a=s.subscribe("private-guest-typing.g_"+e);a.bind("guest-is-typing",function(e){t.add({guest_typing:!0,guest_typing_user:e.guest_typing_user}),setTimeout(function(){t.add({guest_typing:!1})},900)})},isReadGuestEvent:function(){var t=this,e=Object.keys(this.user).length>0?this.user.id:this.guest_id,s=this.pusher_init(),a=s.subscribe("private-guest-read.g_"+e);a.bind("guest-is-read",function(e){e.data.status&&(t.guest_id>0&&Object.keys(t.guest_messages).length>0&&t.guest_messages.forEach(function(t,e){0==t.is_read&&(t.is_read=1)}),t.add({guest_messages:t.guest_messages}))})},is_read_guest:function(){if(this.guest_id>0&&0==this.close){var t,e=(t={},Object(a["a"])(t,csrf_name,csrf_token),Object(a["a"])(t,"guest_id",this.guest_id),t),s=this.toFormData(e);r.a.post(addchat_api+"is_read_guest",s).then(function(t){})}},getGuestUpdates:function(){var t=this;if(this.guest_id>0||null!=this.config.logged_user_id){var e,s=(e={},Object(a["a"])(e,csrf_name,csrf_token),Object(a["a"])(e,"notification",JSON.stringify(this.guest_notifications)),Object(a["a"])(e,"guest_id",this.$cookie.get("guest")),e),i=this.toFormData(s);r.a.post(addchat_api+"get_guest_updates",i).then(function(e){e.data.status&&(t.add({guest_notifications:e.data.guest_notifications}),new Audio(base_url+t.config.assets_path+"/addchat/sound/notification.mp3").play(),t.getGuestLatestMessage())}).catch(function(t){console.log(t)})}}}),mounted:function(){this.getGuestUpdates(),this.messageGuestSendEvent(),this.isReadGuestEvent(),this.typingGuestEvent(),null==this.config.logged_user_id&&(this.is_read_guest(),this.removeGuestNotifications())},watch:{guest_id:function(){null!=this.config.logged_user_id&&(this.is_read_guest(),this.removeGuestNotifications())}}},gs=ps,_s=Object(b["a"])(gs,ms,fs,!1,null,null,null),vs=_s.exports,hs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ca-conversations ca-active c-animate"},[s("div",{staticClass:"ca-card"},[s("h3",{staticClass:"ca-card-header"},[t._v("Guests Conversations")]),s("div",{staticClass:"ca-table"},[s("div",{staticClass:"c-chatbox",class:{"c-active":t.active}},[s("span",{staticClass:"c-close",on:{click:function(e){t.active=!1,t.offset2=0,t.more2=1,t.conversations=[]}}},[t._v("×")]),s("div",{staticClass:"c-buddy"},[s("div",{staticClass:"c-heading"},[s("p",{staticClass:"c-title animate"},[t._v(t._s(t.sender_name)+" -> "+t._s(t.receiver_name)+" ")])])]),s("div",{staticClass:"c-messages c-animate"},[s("vuescroll",[t.more2>0?s("span",{staticClass:"c-more",on:{click:function(e){return t.get_guest_conversations(t.m_from,t.m_to,t.g_from,t.g_to,t.sender_name,t.receiver_name)}}},[t._v("Load More")]):t._e(),t._l(t.conversations,function(e,a){return s("div",{key:a,staticClass:"c-message c-animate",class:{"c-reply":e.m_from==t.user_id}},[0==a||a>0&&t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD")!=t.moment(t.conversations[a-1].dt_updated,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD")?s("label",{staticClass:"c-daystamp c-animate"},[t._v("\n                                "+t._s(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("MMMM Do YYYY"))+"\n                                \n                            ")]):t._e(),s("div",{staticClass:"c-bubble-wrapper"},[s("div",{directives:[{name:"linkified",rawName:"v-linkified"}],staticClass:"c-bubble c-animate",domProps:{innerHTML:t._s(t.findUrl(e.message))}})]),s("span",{staticClass:"c-timestamp c-animate"},[t._v(t._s(t.timeSince(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss"))))]),e.m_to_delete>0&&e.m_from_delete>0?s("span",{staticClass:"c-deleted"},[t._v("Deleted")]):t._e()])})],2)],1)]),t._m(0),s("div",{staticClass:"ca-table-body"},t._l(t.chat_betweens,function(e,a){return s("div",{key:a,staticClass:"ca-table-row"},[s("div",{staticClass:"ca-table-cell"},[t._v("\n                        "+t._s(0==e.m_from?e.g_from_fullname:e.m_from_username?e.m_from_username:t.fullName(e.m_from_email))+" "),s("i",{staticClass:"fas fa-arrow-circle-right"}),t._v(" \n                        "+t._s(0==e.m_to?e.g_to_fullname:e.g_to_username?e.m_to_username:t.fullName(e.m_to_email))+"\n                    ")]),s("div",{staticClass:"ca-table-cell"},[t._v(t._s(e.message)+" ")]),s("div",{staticClass:"ca-table-cell"},[t._v(t._s(t.moment(e.dt_updated,"YYYY-MM-DD HH:mm:ss").format("LLLL")))]),s("div",{staticClass:"ca-table-cell"},[s("button",{staticClass:"c-button c-btn-primary c-btn-sm",attrs:{type:"button"},on:{click:function(s){t.get_guest_conversations(e.m_from,e.m_to,e.g_from,e.g_to,0==e.m_from?e.g_from_fullname:e.m_from_username?e.m_from_username:t.fullName(e.m_from_email),0==e.m_to?e.g_to_fullname:e.g_to_username?e.m_to_username:t.fullName(e.m_to_email))}}},[t._v("\n                        view\n                        ")])])])}),0),s("div",{staticClass:"ca-table-header"},[t.more>0?s("div",{staticClass:"ca-table-header-cell ca-load-more",on:{click:function(e){return t.chatBetweenGuest()}}},[t._v("Load More")]):t._e()])])])])},bs=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ca-table-header"},[s("div",{staticClass:"ca-table-header-cell"},[t._v("Chat Between")]),s("div",{staticClass:"ca-table-header-cell"},[t._v("Last Message")]),s("div",{staticClass:"ca-table-header-cell"},[t._v("Last Date")]),s("div",{staticClass:"ca-table-header-cell"},[t._v("View")])])}];function ys(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function Cs(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?ys(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ys(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var Os={components:{vuescroll:D.a},props:["base_url"],mixins:[u],computed:Cs({},Object(l["c"])(["config"])),data:function(){return{chat_betweens:Array(0),conversations:Array(0),offset:0,more:1,active:!1,sender_name:null,receiver_name:null,user_id:null,guest_id:null,offset2:0,more2:1,moment:moment,g_to:0,g_from:0,m_to:0,m_from:0}},methods:{chatBetweenGuest:function(){var t=this,e=Object(a["a"])({},csrf_name,csrf_token),s=this.toFormData(e);r.a.post(addchat_api+"a_chat_between_guest/"+this.offset,s).then(function(e){if(e.data.status){var s;if(t.chat_betweens.length>0)(s=t.chat_betweens).push.apply(s,Object(k["a"])(e.data.chat_between_guest));else t.chat_betweens=e.data.chat_between_guest;t.more=e.data.more,t.offset=e.data.offset}}).catch(function(t){console.log(t)})},get_guest_conversations:function(t,e,s,i,n,c){var o,l=this;this.active=!0,this.sender_name=n,this.receiver_name=c,this.user_id=e>0?e:t,this.guest_id=i>0?i:s,this.m_to=e,this.m_from=t,this.g_to=i,this.g_from=s;var u=(o={},Object(a["a"])(o,csrf_name,csrf_token),Object(a["a"])(o,"user_id",this.user_id),Object(a["a"])(o,"guest_id",this.guest_id),Object(a["a"])(o,"offset",this.offset2),o),d=this.toFormData(u);r.a.post(addchat_api+"a_get_guest_conversations",d).then(function(t){if(t.data.status){var e;if(l.conversations.length>0)(e=l.conversations).unshift.apply(e,Object(k["a"])(t.data.conversations));else l.conversations=t.data.conversations;l.more2=t.data.more,l.offset2=t.data.offset}}).catch(function(t){console.log(t)})}},mounted:function(){this.chatBetweenGuest()}},js=Os,ks=Object(b["a"])(js,hs,bs,!1,null,null,null),ws=ks.exports;function Ps(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function xs(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ps(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ps(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var Ds={components:{ProfileComponent:C,ContactsComponent:$,BuddyComponent:L,MessagesComponent:Z,SendComponent:ot,GroupsComponent:gt,GuestComponent:jt,GuestMessage:Mt,GuestsComponent:At,GuestsMessages:Vt,GuestsBuddy:ee,GuestsSend:le,GuestSend:ve,DashboardComponent:je,ConversationsComponent:Me,BlockedComponent:Fe,ChatgroupsComponent:Re,SettingsComponent:We,GuestConversations:ws,PusherComponent:ls,PusherGuests:vs},mixins:[u],data:function(){return{ca_active:2,ca_sidebar:0,admin:null,guest_group_users:[]}},computed:xs({},Object(l["c"])(["base_url","buddy_id","buddy","active","group_id","guest","admin_active","config","guest_id","user","guest_user_cookie","guest_notifications","guest_messages","notifications","notify","modal","image_modal","csrf_name","csrf_token","close"])),methods:xs({},Object(l["b"])(["add","update","addMessages"]),{openChat:function(){if(this.close=this.add({close:!this.close}),!this.close){var t=new Audio(base_url+this.config.assets_path+"/addchat/sound/notification.mp3");t.volume=0,t.play()}},activated:function(t){this.add({active:t})},getGuestUser:function(){var t,e=this,s=(t={},Object(a["a"])(t,csrf_name,csrf_token),Object(a["a"])(t,"guest_user_id",this.$cookie.get("guest")),t),i=this.toFormData(s);null==this.config.logged_user_id&&r.a.post(addchat_api+"get_guest_user",i).then(function(t){t.data.status&&(e.add({guest_user_cookie:!0,guest:t.data.guest,guest_id:t.data.guest.id}),e.getGuestUpdates()),e.guest_group_users=t.data.guest_group_users}).catch(function(t){console.log(t)})},getGuestUpdates:function(){var t=this;null==this.config.logged_user_id&&this.config.notification_type<=0&&(console.log(this.config.notification_type),setInterval(function(){var e,s=(e={},Object(a["a"])(e,csrf_name,csrf_token),Object(a["a"])(e,"notification",JSON.stringify(t.guest_notifications)),Object(a["a"])(e,"guest_id",t.$cookie.get("guest")),e),i=t.toFormData(s);r.a.post(addchat_api+"get_guest_updates",i).then(function(e){e.data.status&&(t.add({guest_notifications:e.data.guest_notifications}),new Audio(base_url+t.config.assets_path+"/addchat/sound/notification.mp3").play(),t.getGuestLatestMessage())}).catch(function(t){console.log(t)})},6e3))},getGuestLatestMessage:function(){var t=this;this.guest_notifications.length>0&&null==this.config.logged_user_id&&!this.close&&this.config.notification_type<=0&&this.guest_notifications.forEach(function(e,s){if(t.$cookie.get("guest")){var i,n=(i={},Object(a["a"])(i,csrf_name,csrf_token),Object(a["a"])(i,"guest_user_id",t.$cookie.get("guest")),i),c=t.toFormData(n);r.a.post(addchat_api+"get_guest_latest_message1",c).then(function(e){null!==e.data.messages&&(t.guest_messages.forEach(function(t,e){0==t.is_read&&(t.is_read=1)}),t.addMessages({guest_messages:e.data.messages}))})}})},getConfig:function(){var t=this,e=Object(a["a"])({},csrf_name,csrf_token),s=this.toFormData(e);r.a.post(addchat_api+"get_config",s).then(function(e){t.add({config:e.data.config,csrf_name:csrf_name,csrf_token:csrf_token}),null!=t.config.logged_user_id&&t.getProfile(),t.checkGuestAccount(),t.getGuestUser()}).catch(function(t){console.log(t)})},getProfile:function(){var t=this,e=Object(a["a"])({},csrf_name,csrf_token),s=this.toFormData(e);r.a.post(addchat_api+"get_profile",s).then(function(e){t.add({user:e.data.profile})}).catch(function(t){console.log(t)})},checkGuestAccount:function(){var t,e=this,s=(t={},Object(a["a"])(t,csrf_name,csrf_token),Object(a["a"])(t,"guest_id",this.$cookie.get("guest")),t),i=this.toFormData(s);this.config.logged_user_id>0&&this.$cookie.get("guest")&&r.a.post(addchat_api+"check_guest_account",i).then(function(t){t.data.status&&e.$cookie.delete("guest")}).catch(function(t){console.log(t)})},countNotification:function(){var t=0;return this.notifications.length>0&&this.notifications.forEach(function(e,s){t=parseInt(t)+parseInt(e.messages_count)}),t},countGuestNotification:function(){var t=0;return this.guest_notifications.length>0&&this.guest_notifications.forEach(function(e,s){t=parseInt(t)+parseInt(e.messages_count)}),t},sizeChange:function(t){var e,s=this,i=(e={},Object(a["a"])(e,csrf_name,csrf_token),Object(a["a"])(e,"size",t),Object(a["a"])(e,"fullname",this.fullName(this.user.email)),e),n=this.toFormData(i);r.a.post(addchat_api+"size_change",n).then(function(t){t.data.status&&s.getProfile()}).catch(function(t){console.log(t)})},darkModeChange:function(t){var e,s=this,i=(e={},Object(a["a"])(e,csrf_name,csrf_token),Object(a["a"])(e,"dark_mode",t),Object(a["a"])(e,"fullname",this.fullName(this.user.email)),e),n=this.toFormData(i);r.a.post(addchat_api+"dark_mode_change",n).then(function(t){t.data.status&&s.getProfile()}).catch(function(t){console.log(t)})},isTyping:function(){console.log("puser"),this.$refs.pusher_c.isTyping()},isGuestTyping:function(){console.log("puser_guest"),this.$refs.pusher_guest_c.isGuestTyping()}}),mounted:function(){this.getConfig()},watch:{admin_active:function(){var t=this,e=Object(a["a"])({},csrf_name,csrf_token),s=this.toFormData(e);r.a.post(addchat_api+"check_admin",s).then(function(e){e.data.status?(t.admin=1,t.add({admin_active:!0})):t.admin=null}).catch(function(t){console.log(t)})}}},Ss=Ds,Ns=Object(b["a"])(Ss,n,c,!1,null,null,null),Ms=Ns.exports,Ys=s("a7fe"),Es=s.n(Ys);i["default"].use(Es.a,r.a),i["default"].use(l["a"]);var $s=new l["a"].Store({state:{config:Array,user:Array,buddy_id:Number(0),buddyIndex:Number,buddy:Array,notifications:Array(0),guest_id:Number(0),guest:[],guest_messages:[],guest_user_cookie:!1,guest_notifications:Array(0),users:Array(0),messages:Array,active:1,admin_active:!1,notify:{status:"",message:null,type:null},modal:{status:"",message:null,action:0},messageIndex:null,message_quote:{m_reply_id:null,reply_user_id:null,message:null,name:null},image_modal:{state:"",path:null},csrf_name:null,csrf_token:null,typing:!1,typing_user:[],guest_typing:!1,guest_typing_user:[],close:!0},mutations:{add:function(t,e){var s=e.config,a=e.users,i=e.user,n=e.imagePath,c=e.messages,o=e.buddy_id,r=e.buddy,l=e.notifications,u=e.active,d=e.buddyIndex,m=e.message_quote,f=e.admin_active,p=e.guest_id,g=e.guest,_=e.guest_messages,v=e.guest_user_cookie,h=e.guest_notifications,b=e.notify,y=e.modal,C=e.messageIndex,O=e.image_modal,j=e.csrf_name,k=e.csrf_token,w=e.typing,P=e.typing_user,x=e.guest_typing,D=e.guest_typing_user,S=e.close;"undefined"!==typeof s&&(t.config=s),"undefined"!==typeof a&&(t.users=a),"undefined"!==typeof i&&(t.user=i),"undefined"!==typeof n&&(t.imagePath=n),"undefined"!==typeof c&&(t.messages=c),"undefined"!==typeof o&&(t.buddy_id=o),"undefined"!==typeof r&&(t.buddy=r),"undefined"!==typeof l&&(t.notifications=l),"undefined"!==typeof u&&(t.active=u),"undefined"!==typeof d&&(t.buddyIndex=d),"undefined"!==typeof m&&(t.message_quote=m),"undefined"!==typeof f&&(t.admin_active=f),"undefined"!==typeof p&&(t.guest_id=p),"undefined"!==typeof g&&(t.guest=g),"undefined"!==typeof _&&(t.guest_messages=_),"undefined"!==typeof v&&(t.guest_user_cookie=v),"undefined"!==typeof h&&(t.guest_notifications=h),"undefined"!==typeof b&&(t.notify=b),"undefined"!==typeof y&&(t.modal=y),"undefined"!==typeof C&&(t.messageIndex=C),"undefined"!==typeof O&&(t.image_modal=O),"undefined"!==typeof j&&(t.csrf_name=j),"undefined"!==typeof k&&(t.csrf_token=k),"undefined"!==typeof w&&(t.typing=w),"undefined"!==typeof P&&(t.typing_user=P),"undefined"!==typeof S&&(t.close=S),"undefined"!==typeof x&&(t.guest_typing=x),"undefined"!==typeof D&&(t.guest_typing_user=D)},update:function(t,e){var s,a,i,n=e.users,c=e.messages,o=e.is_contact,r=e.message_quote,l=e.guest_messages;"undefined"!==typeof n&&(s=t.users).push.apply(s,Object(k["a"])(n));"undefined"!==typeof c&&(c.length>1?(a=t.messages).push.apply(a,Object(k["a"])(c)):t.messages.push(c));"undefined"!==typeof l&&(l.length>1?(i=t.guest_messages).push.apply(i,Object(k["a"])(l)):t.guest_messages.push(l));"undefined"!==typeof o&&(t.buddy.is_contact=o),"undefined"!==typeof r&&(t.message_quote={m_reply_id:null,reply_user_id:null,message:null,name:null})},prepend:function(t,e){var s,a,i=e.messages,n=e.guest_messages;"undefined"!==typeof i&&(i.length>1?(s=t.messages).unshift.apply(s,Object(k["a"])(i)):t.messages.unshift(i));"undefined"!==typeof n&&(n.length>1?(a=t.guest_messages).unshift.apply(a,Object(k["a"])(n)):t.guest_messages.unshift(n))},addMessages:function(t,e){var s,a,i,n=e.messages,c=e.guest_messages,o=e.guest_notifications;"undefined"!==typeof n&&(s=t.messages).push.apply(s,Object(k["a"])(n));"undefined"!==typeof c&&(a=t.guest_messages).push.apply(a,Object(k["a"])(c));"undefined"!==typeof o&&(i=t.guest_notifications).push.apply(i,Object(k["a"])(o))}}}),Gs=s("9aa5"),Us=s.n(Gs),Fs=s("0086"),qs=s.n(Fs),As=s("616f");window.moment=s("c1df"),i["default"].directive("linkified",Us.a),i["default"].use(Es.a,r.a),i["default"].use(f["a"]),i["default"].use(P.a);var Is=s("00e7");i["default"].use(Is),i["default"].use(D.a,{ops:{bar:{background:"#C0C0C0"}}}),i["default"].use(qs.a);var Hs=Object(As["longClickDirective"])({delay:400,interval:50});i["default"].directive("longclick",Hs),i["default"].config.productionTip=!0,i["default"].config.devtools=!0;var Ls=!1;window.base_url=document.querySelector("#addchat_app").dataset.baseurl+"/",window.base_url=base_url.replace(new RegExp("//","g"),"/"),window.base_url=base_url.replace(new RegExp(":/","g"),"://"),window.addchat_api=base_url+"addchat_api/";var Ts="/"+window.location.pathname+"/";Ts=Ts.replace(new RegExp("//","g"),"/");var zs=[],Rs=[],Bs=0;function Vs(t){var e=new FormData;return Object.keys(t).forEach(function(s){e.append(s,t[s])}),e}window.csrf_name=document.querySelector("#addchat_app").dataset.csrfname,window.csrf_token=document.querySelector("#addchat_app").dataset.csrftoken;var Js=Object(a["a"])({},csrf_name,csrf_token),Xs=Vs(Js);r.a.post(addchat_api+"get_config",Xs).then(function(t){zs=t.data.config.include_url,Rs=t.data.config.exclude_url,Bs=t.data.config.include_or_exclude,0==Bs||null==Bs?Ls=!0:1==Bs?(Ls=!1,zs&&zs.forEach(function(t){if(t="/"+t+"/",t=t.replace(new RegExp("//","g"),"/"),t==Ts)return Ls=!0,!0})):2==Bs?(Ls=!0,Rs&&Rs.forEach(function(t){if(t="/"+t+"/",t=t.replace(new RegExp("//","g"),"/"),t===Ts)return Ls=!1,!0})):Ls=!0,new i["default"]({store:$s,render:function(t){return t(Ls?Ms:"")},components:{App:Ms},mounted:function(){console.log("Addchat initialized successfully."),console.log("addchatapi--\x3e"),console.log(addchat_api)}}).$mount("#addchat_app")}).catch(function(t){console.log(t)})},"6fe5":function(t,e,s){e=t.exports=s("2350")(!1),e.push([t.i,".modal-dialog[data-v-9af4ab2c]{position:absolute;top:0;left:0;right:0;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:rgba(0,0,0,.4)}.modal-content[data-v-9af4ab2c]{padding:20px;min-width:50rem;min-height:22rem;background:#fff;border-radius:5px}",""])},"786a":function(t,e,s){"use strict";var a=s("b245"),i=s.n(a);i.a},b245:function(t,e,s){var a=s("6fe5");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=s("499e").default;i("161f87b8",a,!0,{sourceMap:!1,shadowMode:!1})}});